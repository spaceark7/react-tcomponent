import e,{useState as t,useRef as a,useEffect as s}from"react";import"react-phone-number-input/style.css";import"bootstrap/dist/css/bootstrap.min.css";import"dropzone/dist/min/dropzone.min.css";import"video-react/dist/video-react.css";import"rc-time-picker/assets/index.css";import"react-datepicker/dist/react-datepicker.css";import"react-input-range/lib/css/index.css";import n from"cleave.js/react";import{isUndefined as l,isEmpty as o,filter as r,isEqual as i,isArray as p,isString as d,debounce as c,isNull as m,find as h,includes as u,uniqBy as y,findIndex as g,isBoolean as f,uniq as E,map as Y,isObject as b,isPlainObject as v,isNumber as k}from"lodash";import D from"react-phone-number-input";import T from"jodit-react";import R from"mousetrap";import{slug as S,findArrayName as C,secureData as M,setAuthHeader as x,numberFormat as I,useDebounce as w,fetchErrorDispatch as P,defaultFilterData as V}from"tcomponent";import H from"html-react-parser";import{Modal as N,Button as L,InputGroup as A,Form as F,ButtonGroup as O,Table as z,Row as U,Col as j,Tooltip as B,DropdownButton as G,Dropdown as W,Card as K}from"react-bootstrap";import"@wiris/mathtype-generic";import q from"react-contenteditable";import{useSelector as X,useDispatch as J,connect as Q}from"react-redux";import Z from"axios";import $ from"react-dropzone-component";import{Player as ee}from"video-react";import*as te from"moment";import ae from"moment";import{FontAwesomeIcon as se}from"@fortawesome/react-fontawesome";import{faSearch as ne,faDownload as le,faTimes as oe,faAngleDoubleLeft as re,faAngleLeft as ie,faBars as pe,faAngleRight as de,faAngleDoubleRight as ce,faSync as me}from"@fortawesome/free-solid-svg-icons";import he from"react-spinners/PuffLoader";import ue from"react-datepicker";import{faCalendar as ye,faFile as ge,faArrowAltCircleDown as fe,faArrowAltCircleUp as _e,faClock as Ee}from"@fortawesome/free-regular-svg-icons";import Ye from"react-input-range";import be from"react-loading-overlay";import ve from"styled-components";import{useTable as ke,useFilters as De,useSortBy as Te,useExpanded as Re,usePagination as Se}from"react-table";import{useIsVisible as Ce}from"react-is-visible";import Me from"rc-time-picker";import xe from"react-tag-autocomplete";import Ie from"react-select";import{css as we}from"@emotion/react";import{SketchPicker as Pe}from"react-color";import Ve from"react-apexcharts";function He(r){const i=l(null==r?void 0:r.name)?"":S(String(null==r?void 0:r.name),"_"),p=X(e=>{var t;return null===(t=e.core)||void 0===t?void 0:t.input})||{},d=C(i,p)||"",c=J(),[m,h]=t((null==r?void 0:r.placeholder)||""),u=l(null==r?void 0:r.type)?"":String(null==r?void 0:r.type),[y,g]=t(!1),[f,_]=t(""),[E,Y]=t({}),b=t({readonly:!1,placeholder:" ",toolbarButtonSize:"small"}),v=a(),k=a(),M=a();let x="text"===u||l(u)?"search":u;function I(e){e.preventDefault();let t=e.target.value?String(e.target.value):"";"nik"!=u&&"kip"!=u&&"npwp"!=u&&"postcode"!=u||(t=t.replace(/\D/g,"")),null!=r&&r.maxlength&&(t=t.substring(0,null==r?void 0:r.maxlength)),P(t)}function w(){g(!1)}function P(e){var t;t=e,c({type:"SET_INPUT",payload:{key:S(String(i),"_"),value:t}})}return s(()=>{let e=(null==r?void 0:r.placeholder)||"",t={};"nik"==u.toLowerCase()?(t={delimiter:" ",blocks:[2,2,2,6,4],numericOnly:!0},e=(null==r?void 0:r.placeholder)||"Nomor Induk Kependudukan"):"kip"==u.toLowerCase()?(t={delimiter:" ",blocks:[4,4,4,4]},e=(null==r?void 0:r.placeholder)||"Kartu Indonesia Pintar"):"npwp"==u.toLowerCase()?(t={delimiters:[".",".",".","-","."],blocks:[2,3,3,1,3,3],numericOnly:!0},e=(null==r?void 0:r.placeholder)||"Nomor Pokok Wajib Pajak"):"postcode"==u.toLowerCase()?(t={blocks:[5],delimiter:" ",numericOnly:!0},e=(null==r?void 0:r.placeholder)||"Kode Pos"):"phone"==u.toLowerCase()&&(e=(null==r?void 0:r.placeholder)||"Telepon"),h(e),Y(t)},[u]),s(()=>{l(null==r?void 0:r.value)||P(null==r?void 0:r.value)},[null==r?void 0:r.value]),s(()=>{if(null!=r&&r.disableCopy||null!=r&&r.disablePaste||null!=r&&r.disableSelectAll){let e=[];null!=r&&r.disableCopy&&(e.push("command+c"),e.push("ctrl+c")),null!=r&&r.disablePaste&&(e.push("command+v"),e.push("ctrl+v")),null!=r&&r.disableSelectAll&&(e.push("command+a"),e.push("ctrl+a")),e.length>0&&R.bind(e,function(){return!1})}if("equation"==u)try{let e={};e.target=M.current,e.toolbar=v.current;let t=new window.WirisPlugin.GenericIntegration(e);t.init(),t.listeners.fire("onTargetReady",{}),WirisPlugin.currentInstance=t}catch(e){}},[]),i?null!=r&&r.disabled||null!=r&&r.isReadonly?!o(d)&&H(String(d)):"nik"==u||"kip"==u||"npwp"==u||"postcode"==u?e.createElement(n,{placeholder:m,id:null==r?void 0:r.id,name:i,value:d,onChange:I,options:E,className:"form-control"}):"textarea"==u?e.createElement("textarea",{id:null==r?void 0:r.id,rows:(null==r?void 0:r.rows)||3,className:"form-control no-resize mousetrap",onChange:I,name:i,value:d,placeholder:m}):"phone"==u?e.createElement(D,{international:!0,defaultCountry:"ID",value:d?String(d):"",onChange:P}):"texteditor"==u?e.createElement(e.Fragment,null,e.createElement("div",{className:"form-control",style:{minHeight:32},onClick:function(){_(""),g(!0)}},o(d)?"":H(String(d))),e.createElement(N,{backdrop:"static",autoFocus:!0,restoreFocus:!0,centered:!0,size:"xl",show:y,onHide:w},e.createElement(N.Body,null,e.createElement(T,{key:(null==r?void 0:r.name)+"_editor",id:null==r?void 0:r.id,ref:k,value:o(d)?"":String(d),config:b,tabIndex:1,onChange:e=>_(e)})),e.createElement(N.Footer,{style:{justifyContent:"space-between"}},e.createElement(L,{onClick:w,variant:"secondary"},"Kembali"),e.createElement(L,{onClick:function(){P(f),w()},variant:"primary"},"Simpan")))):"equation"==u?e.createElement(A,null,e.createElement(A.Text,null,e.createElement("div",{ref:v})),e.createElement(q,{suppressContentEditableWarning:!0,className:"form-control",innerRef:M,onChange:function(e){window.WirisPlugin.Parser.endParse(e.target.value),P(e.target.value)},html:d||""})):e.createElement(F.Control,{id:null==r?void 0:r.id,type:x,placeholder:m,value:d,onChange:I,name:i,className:"form-control mousetrap"}):"Name is Required"}function Ne(){return e.createElement(he,{color:"#000",size:25})}let Le=te;function Ae(t){try{if(i(t.type.type.substring(0,5),"image"))return e.createElement("img",{key:t.file,className:"img-responsive",style:{maxWidth:"100%"},src:process.env.REACT_APP_API_URL+"/file/stream/"+t.file});if(i(t.type.type.substring(0,5),"video"))return e.createElement(ee,{key:t.file,autoPlay:!1,src:process.env.REACT_APP_API_URL+"/file/stream/"+t.file});if(i(t.type.type,"application/pdf"))return e.createElement("iframe",{key:t.file,width:"100%",height:"480",src:process.env.REACT_APP_API_URL+"/file/stream/"+t.file})}catch(e){}return null}function Fe(a){let n=a.accept?a.accept:"image/*, video/*, audio/*, .docx, .xlsx, .pptx, .csv, .pdf",l=X(e=>e.core.input),c=X(e=>e.core.parameter),[m,h]=t({}),[u,y]=t([]),[g,f]=t(!1),_=X(e=>e.auth),E=J();function Y(e){if(d(e)&&!o(e)&&"null"!=e&&o(m[e])){let t=process.env.REACT_APP_API_URL+"/file/info",a=M({token_file:e}),s={method:"POST",headers:x(_),url:t,data:a};f(!0),Z(s).then(t=>{t.data.success&&(m[e]=t.data.data,h(m),R[e]=!1,S(R)),f(!1)}).catch(t=>{m[e]="",h(m),R[e]=!1,S(R)})}}function b(e){return d(e)&&!o(e)&&"null"!=e}function v(e){return r(e,b)||[]}function k(e){return v(String(e).split("|"))}function D(e){S({...R,[e]:!R[e]})}function T(e){e!=c.openFile&&E({type:"SET_PARAMETER",payload:{key:"openFile",value:e}})}s(()=>{let e=a.value?a.value:C(a.name,l);if(e){let t=k(e);y(t)}},[]),s(()=>{let e=k(C(a.name,l));i(e,u)||y(e)},[C(a.name,l)]),s(()=>{!function(e){try{if(p(e)&&e.length>0)for(let t=0;t<e.length;t++)b(e[t])&&Y(e[t]);else b(e)&&Y(e)}catch(e){}}(u)},[u]),s(()=>{T(g)},[g]);let[R,S]=t({}),I=v(u);return process.env.REACT_APP_API_URL?e.createElement("div",null,!g&&!a.isReadonly&&e.createElement("div",null,!a.isMultiple&&e.createElement("div",{style:{display:"inline-block"}},e.createElement(F.Control,{className:a.className,accept:n,label:a.name,type:"file",onChange:function(e){let t=e.target.files||e.dataTransfer.files;t.length&&function(e){let t=new FileReader;t.onload=t=>{!function(e,t){let s=a.url||process.env.REACT_APP_API_URL+"/file/upload",n=new FormData,l=e.name;n.append("type",e.type),n.append("name",l),n.append("file",e),n.append("lastModifiedDate",Le(e.lastModifiedDate).format("YYYY-MM-DD HH:mm:ss")),n.append("size",e.size),f(!0),Z.post(s,n,{headers:x(_,"multipart/form-data; boundary="+n._boundary)}).then(e=>{o(e.data.message)||E({type:"SET_MESSAGE",payload:e.data.message}),e.data.success?(E({type:"SET_INPUT",payload:{key:a.name,value:e.data.data.token}}),y([e.data.data.token])):E({type:"SET_INPUT",payload:{key:a.name,value:""}}),f(!1)}).catch(e=>{E({type:"SET_INPUT",payload:{key:a.name,value:""}}),E({type:"SET_MESSAGE",payload:"Gagal mengunggah lampiran"}),f(!1)})}(e)},t.readAsDataURL(e)}(t[0])},onInput:function(e){T(!1)},onClick:function(e){T(!0),setTimeout(()=>{T(!1)},6e4)}})),!g&&a.isMultiple&&e.createElement($,{config:{showFiletypeIcon:!0,postUrl:process.env.REACT_APP_API_URL+"/file/upload_multiple",uploadMultiple:!0,maxFiles:5},eventHandlers:{drop:function(){},complete:function(e){let t=JSON.parse(e.xhr.response),s=u||[];s.push(t.data.token);let n=r(s,function(e){return!o(e)})||[];E({type:"SET_INPUT",payload:{key:a.name,value:n.join("|")}}),y(n)},removedfile:function(e){}},djsConfig:{acceptedFiles:n,params:{token:_.user.token},addRemoveLinks:!0,autoProcessQueue:!0,maxFiles:5}})),!g&&I.length>0&&I.map((t,s)=>e.createElement("div",{style:{display:"inline-block"},key:t},a.preview&&e.createElement(e.Fragment,null,e.createElement(Ae,{key:t,type:m[t],file:t}),e.createElement("br",null)),e.createElement(O,null,e.createElement(L,{variant:"primary",onClick:()=>D(t)},e.createElement(se,{icon:ne})," Lihat"),e.createElement(L,{vendor:"success",onClick:()=>window.location.href=process.env.REACT_APP_API_URL+"/file/download/"+t},e.createElement(se,{icon:le})," Unduh"),!a.isReadonly&&e.createElement(L,{variant:"danger",onClick:()=>function(e){let t=process.env.REACT_APP_API_URL+"/file/delete",s=M({token_file:e,token:_.token}),n={method:"POST",headers:x(_),url:t,data:s};f(!0),Z(n).then(t=>{o(t.data.message)||E({type:"SET_MESSAGE",payload:t.data.message});let s=r(u,t=>!i(t,e));y(s),E({type:"SET_INPUT",payload:{key:a.name,value:s}}),f(!1)}).catch(t=>{E({type:"SET_MESSAGE",payload:"Gagal menghapus lampiran"});let s=r(u,t=>!i(t,e));E({type:"SET_INPUT",payload:{key:a.name,value:s}}),y(s),f(!1)})}(t)},e.createElement(se,{icon:oe})," Hapus")),e.createElement(N,{backdrop:"static",autoFocus:!0,restoreFocus:!0,centered:!0,size:"xl",id:"modal_"+t,show:R[t],onHide:()=>D(t)},e.createElement(N.Header,{closeButton:!0,onHide:()=>D(t)},e.createElement(N.Title,null,"Lampiran ",t)),e.createElement(N.Body,null,e.createElement(Ae,{key:t,type:m[t],file:t}))))),g&&e.createElement(Ne,null)):e.createElement("span",null,"REACT_APP_API_URL is required for .env")}var Oe=Q(e=>({input:e.core.input||{}}),e=>({setInput:(t,a)=>e({type:"SET_INPUT",payload:{key:S(String(t)),value:a}})}))(class extends e.Component{constructor(e){super(e),this.labelGenerate=e=>{let t=[];if(p(this.props.optionLabel))for(let a=0;a<=this.props.optionLabel.length-1;a++)t.push(e[this.props.optionLabel[a]]);else t.push(e[this.props.optionLabel]);return t},this.onChange=e=>{if(!this.props.isReadonly&&this.props.name)try{if(this.props.isMultiple){let t=this.state.defaultValue||[],a=!1,s=[];for(let n=0;n<t.length;n++){let l=t[n];l==e[this.props.optionValue]?a=!0:s.push(l)}a||s.push(e[this.props.optionValue]),this.props.setInput(this.props.name,s)}else{let t=C(this.props.name,this.props.input)||null;this.props.value&&(t=this.props.value);let a=null;t!=e[this.props.optionValue]&&(a=e[this.props.optionValue]),this.props.setInput(this.props.name,a)}}catch(e){this.props.setInput(this.props.name,null)}this.onRefresh()},this.state={defaultValue:null,type:this.props.type||"inline"},this.onRefresh=c(this.onRefresh.bind(this),200)}onRefresh(){let e=null,t=null;if(e=this.props.value?this.props.value:C(this.props.name,this.props.input)||null,!m(e))if(this.props.isMultiple){t=[];for(let a=0;a<this.props.options.length;a++)for(let s=0;s<e.length;s++){let n=this.props.options[a],l=e[s];String(n[this.props.optionValue])==String(l)&&t.push(n[this.props.optionValue])}}else t=h(this.props.options,function(t){return String(t[this.props.optionValue])==String(e)}.bind(this));t=l(t)||m(t)?null:t,this.setState({defaultValue:t})}componentDidUpdate(e,t){i(C(this.props.name,e.input),C(this.props.name,this.props.input))||i(this.state.defaultValue,C(this.props.name,this.props.input))||this.onRefresh()}componentDidMount(){this.onRefresh()}render(){let t=[];try{t=this.props.options.length>0?this.props.options:[]}catch(e){}return e.createElement("div",{className:"custom-controls-stacked"},t.map(t=>{let a=!1;try{a=this.props.isMultiple?u(this.state.defaultValue,t[this.props.optionValue]):i(t[this.props.optionValue],this.state.defaultValue[this.props.optionValue])}catch(e){}return e.createElement(e.Fragment,null,e.createElement(F.Check,{inline:"inline"==this.state.type,disabled:this.props.disabled||this.props.isReadonly,type:this.props.isMultiple?"checkbox":"radio",name:this.props.name,onChange:this.onChange.bind(this,t),value:t,checked:a,label:this.labelGenerate(t).map((t,a)=>i(String(t).substring(0,3),"AT-")?e.createElement(Fe,{value:t,isReadonly:!0,preview:!0}):this.props.isHtml?H(String(t)):t)}))}))}});const ze=t=>e.createElement(A,null,e.createElement(A.Text,{style:{background:"none"}},e.createElement(se,{icon:ye})),e.createElement(F.Control,{style:{borderLeft:"none",borderRight:"none",fontFamily:"inherit",fontSize:"inherit"},type:"text",className:"form-control",disabled:t.disabled,name:t.name,value:t.value||"",onClick:t.onClick}));var Ue=Q(e=>({input:e.core.input||{}}),e=>({setInput:(t,a)=>e({type:"SET_INPUT",payload:{key:S(String(t),"_"),value:a}})}))(class extends e.Component{constructor(e){super(e),this.handleInputChange=e=>{e=ae(e,"YYYY-MM-DD").isValid()?ae(e,"YYYY-MM-DD").format("YYYY-MM-DD"):null,this.props.setInput(this.props.name,e),this.onRefresh()},this.handleInputChangeStart=e=>{e=ae(e,"YYYY-MM-DD").isValid()?ae(e,"YYYY-MM-DD").format("YYYY-MM-DD"):null,this.props.setInput("start_"+this.props.name,e),this.onRefresh()},this.handleInputChangeEnd=e=>{e=ae(e,"YYYY-MM-DD").isValid()?ae(e,"YYYY-MM-DD").format("YYYY-MM-DD"):null,this.props.setInput("end_"+this.props.name,e),this.onRefresh()},this.checkTglMerah=e=>{let t=ae(e).format("d");return 0==t||6==t?"tglmerah":void 0},this.state={selected:null,start_selected:null,end_selected:null},this.onRefresh=c(this.onRefresh.bind(this),200)}onRefresh(){if(this.props.isRange){let e=null,t=null;try{e=ae(this.props.start_selected,"YYYY-MM-DD").isValid()?ae(this.props.start_selected,"YYYY-MM-DD").toDate():ae(C("start_"+this.props.name,this.props.input),"YYYY-MM-DD").isValid()?ae(C("start_"+this.props.name,this.props.input),"YYYY-MM-DD").toDate():null}catch(e){}try{t=ae(this.props.end_selected,"YYYY-MM-DD").isValid()?ae(this.props.end_selected,"YYYY-MM-DD").toDate():ae(C("end_"+this.props.name,this.props.input),"YYYY-MM-DD").isValid()?ae(C("end_"+this.props.name,this.props.input),"YYYY-MM-DD").toDate():null}catch(e){}this.setState({start_selected:e,end_selected:t})}else{let e=null;try{e=ae(this.props.selected,"YYYY-MM-DD").isValid()?ae(this.props.selected,"YYYY-MM-DD").toDate():ae(C(this.props.name,this.props.input),"YYYY-MM-DD").isValid()?ae(C(this.props.name,this.props.input),"YYYY-MM-DD").toDate():null}catch(e){}this.setState({selected:e})}}componentDidMount(){this.onRefresh()}componentDidUpdate(e,t){this.props.isRange||C(this.props.name,e.input)==C(this.props.name,this.props.input)||C(this.props.name,this.props.input)==this.state.selected||this.onRefresh(),this.props.isRange&&C("start_"+this.props.name,e.input)!=C("start_"+this.props.name,this.props.input)&&C("start_"+this.props.name,this.props.input)!=this.state.start_selected&&this.onRefresh(),this.props.isRange&&C("end_"+this.props.name,e.input)!=C("end_"+this.props.name,this.props.input)&&C("end_"+this.props.name,this.props.input)!=this.state.end_selected&&this.onRefresh()}render(){let t=this.props.dateFormat?this.props.dateFormat:"yyyy-MM-dd";return this.props.isRange?this.props.disabled||this.props.isReadonly?(ae(this.state.start_selected,"YYYY-MM-DD").isValid()?ae(this.state.start_selected,"YYYY-MM-DD").format("DD-MM-YYYY"):"")+" - "+(ae(this.state.end_selected,"YYYY-MM-DD").isValid()?ae(this.state.end_selected,"YYYY-MM-DD").format("DD-MM-YYYY"):""):e.createElement("div",{className:"input-daterange input-group"},e.createElement(ue,{minDate:ae(this.props.minDate,"YYYY-MM-DD").isValid()?ae(this.props.minDate,"YYYY-MM-DD").toDate():null,maxDate:ae(this.props.maxDate,"YYYY-MM-DD").isValid()?ae(this.props.maxDate,"YYYY-MM-DD").toDate():null,dateFormat:t,placeholder:this.props.placeholder?this.props.placeholder:"Tanggal",selected:this.state.start_selected,isClearable:!this.props.disabled&&!this.props.isReadonly,customInput:e.createElement(ze,{value:this.state.start_selected,name:"start_"+this.props.name}),onChange:this.handleInputChangeStart,selectsStart:!0,peekNextMonth:!0,withPortal:!0,showMonthDropdown:!0,showYearDropdown:!0,showYearPicker:!1,name:"start_"+this.props.name,todayButton:"Hari ini",dayClassName:this.checkTglMerah,dropdownMode:"select",disabled:this.props.disabled||this.props.isReadonly,readOnly:this.props.disabled||this.props.isReadonly,startDate:this.state.start_selected,endDate:this.state.end_selected,shouldCloseOnSelect:!1}),e.createElement("span",{className:"input-group-addon",style:{background:"none"}},"  -  "),e.createElement(ue,{minDate:ae(this.state.start_selected,"YYYY-MM-DD").isValid()?ae(this.state.start_selected,"YYYY-MM-DD").toDate():ae(this.props.minDate,"YYYY-MM-DD").isValid()?ae(this.props.minDate,"YYYY-MM-DD").toDate():null,maxDate:ae(this.props.maxDate,"YYYY-MM-DD").isValid()?ae(this.props.maxDate,"YYYY-MM-DD").toDate():null,dateFormat:t,placeholder:this.props.placeholder?this.props.placeholder:"Tanggal",selected:this.state.end_selected,isClearable:!this.props.disabled&&!this.props.isReadonly,name:"end_"+this.props.name,selectsEnd:!0,customInput:e.createElement(ze,{value:this.state.end_selected,name:"end_"+this.props.name}),onChange:this.handleInputChangeEnd,selectsStart:!0,peekNextMonth:!0,withPortal:!0,showMonthDropdown:!0,showYearDropdown:!0,showYearPicker:!1,dayClassName:this.checkTglMerah,todayButton:"Hari ini",dropdownMode:"select",startDate:this.state.start_selected,endDate:this.state.end_selected,disabled:this.props.disabled||this.props.isReadonly,readOnly:this.props.disabled||this.props.isReadonly,shouldCloseOnSelect:!1})):this.props.disabled||this.props.isReadonly?ae(this.props.input[this.props.name],"YYYY-MM-DD").isValid()?ae(this.props.input[this.props.name],"YYYY-MM-DD").format("DD-MM-YYYY"):"":e.createElement(ue,{minDate:ae(this.props.minDate,"YYYY-MM-DD").isValid()?ae(this.props.minDate,"YYYY-MM-DD").toDate():null,maxDate:ae(this.props.maxDate,"YYYY-MM-DD").isValid()?ae(this.props.maxDate,"YYYY-MM-DD").toDate():null,dateFormat:t,placeholder:this.props.placeholder?this.props.placeholder:"Tanggal",customInput:e.createElement(ze,{value:this.state.selected,name:this.props.name}),selected:this.state.selected,isClearable:!this.props.disabled&&!this.props.isReadonly,id:this.props.name,className:"form-control",dayClassName:this.checkTglMerah,onChange:this.handleInputChange,selectsStart:!0,peekNextMonth:!0,withPortal:!0,showMonthDropdown:!0,showYearDropdown:!0,showYearPicker:!1,todayButton:"Hari ini",dropdownMode:"select",disabled:this.props.disabled||this.props.isReadonly,readOnly:this.props.disabled||this.props.isReadonly,shouldCloseOnSelect:!1})}}),je=Q(e=>({input:e.core.input||{}}),e=>({setInput:(t,a)=>{e({type:"SET_INPUT",payload:{key:S(String(t),"_"),value:a}})}}))(class extends e.Component{constructor(e){super(e),this.handleInputChange=e=>{let t=null;t="decimal"==this.props.type?Number(e.target.value.replace(/[^0-9.-]+/g,"")):"percent"==this.props.type?this.validate_min_max(e.target.value.replace(/[^0-9.-]+/g,""),0,100):"range_three"==this.props.type?this.validate_min_max(e.target.value.replace(/[^0-9.-]+/g,""),1,3):"range_hundred"==this.props.type?this.validate_min_max(e.target.value.replace(/[^0-9.-]+/g,""),1,100):"range_depend"==this.props.type?this.validate_min_max(e.target.value.replace(/[^0-9.-]+/g,""),0,100):e.target.value.replace(/[^0-9.-]+/g,"");let a=this.props.minValue?Number(this.props.minValue):null,s=this.props.maxValue?Number(this.props.maxValue):null;s&&a?t=this.validate_min_max(t,a,s):!s&&a?t=this.validate_min_max(t,a,999999999999):s&&!a&&(t=this.validate_min_max(t,0,s)),t=t||0,this.state.props_name&&this.props.setInput(this.state.props_name,t);let n=e.target.rawValue||null;isNaN(parseFloat(n))||isNaN(parseFloat(t))||parseFloat(n)===parseFloat(t)||this.state.event.setRawValue(t)},this.onChange=e=>{this.setState({value:e}),this.state.props_name&&this.props.setInput(this.state.props_name,e)},this.onRefresh=()=>{let e="";try{let t=C(this.state.props_name,this.props.input);e=this.props.value?this.props.value:t}catch(e){}let t=this.props.minValue?Number(this.props.minValue):null,a=this.props.maxValue?Number(this.props.maxValue):null,s=e?parseInt(e):t;("decimal"==this.props.type||"percent"==this.props.type||"range_three"==this.props.type||a||t)&&(s=e?parseFloat(e):t),isNaN(s)&&(s=t),this.setState({value:s});try{parseFloat(this.state.event.lastInputValue||null)!==parseFloat(s)&&this.state.event.setRawValue(s)}catch(e){}},this.checkType=()=>{let e={numeral:!0,numeralPositiveOnly:!0};"decimal"==this.props.type||"percent"==this.props.type||"range_three"==this.props.type||(e.numeralThousandsGroupStyle="thousand"),this.setState({options:e,rawValue:C(this.state.props_name,this.props.input),value:C(this.state.props_name,this.props.input)}),this.onRefresh()},this.state={defaultValue:null,options:{numeral:!0},event:null,value:null,props_name:S(this.props.name,"_")},this.onRefresh=c(this.onRefresh.bind(this),200)}validate_min_max(e,t=0,a=100){return this.props.enableNegative&&e<0&&(t=-a),isNaN(e)&&(e=t),(e=parseFloat(e))>=a?e=a:e<=t&&(e=t),e?Number(e):null}componentDidUpdate(e,t,a){if(i(this.props.type,e.type)||this.checkType(),i(C(this.state.props_name,e.input),C(this.state.props_name,this.props.input))||i(this.state.value,C(this.state.props_name,this.props.input))||(this.setState({rawValue:C(this.state.props_name,this.props.input)||null,value:C(this.state.props_name,this.props.input)||null}),this.onRefresh()),this.props.value&&e.value!=this.props.value&&this.props.value!=this.state.value){let e=this.props.value||null;this.setState({rawValue:e,value:e}),this.onRefresh()}}componentDidMount(){this.checkType()}onInit(e){this.setState({event:e})}render(){return this.props.disabled||this.props.isReadonly?m(this.state.value)||l(this.state.value)?null:I(this.state.value,""):"range"==this.props.type?e.createElement(Ye,{maxValue:this.props.maxValue,minValue:this.props.minValue,value:this.state.value,onChange:this.onChange}):e.createElement(n,{placeholder:this.props.placeholder?this.props.placeholder:"",id:this.state.props_name,name:this.state.props_name,onInit:this.onInit.bind(this),value:this.state.value,onChange:this.handleInputChange,options:this.state.options,className:"form-control"})}});let Be;const Ge=ve(be)(Be||(Be=(e=>e)`
  overflow: hidden;

  ._loading_overlay_overlay {
    background: rgba(255, 255, 255, 0.5);
  }
  &._loading_overlay_wrapper--active {
    overflow: hidden;
  }
`));function We(t){return e.createElement(Ge,{fadeSpeed:250,active:t.isLoading,spinner:e.createElement(Ne,null)},t.children)}const Ke=({})=>null,qe=t=>{let a=t.column.filterValue,n=t.column.id,l=t.name,o=J(),[r,i]=e.useState(a),p=S("search_"+l+"_"+n,"_"),d=X(e=>e.core.filter);return s(()=>{i(d[p])},[]),e.createElement(F.Control,{key:p,id:p,name:p,value:r,style:{zIndex:0},onChange:function(e){e.preventDefault(),i(e.target.value),o({type:"SET_MULTI_FILTER",payload:{[p]:e.target.value,[S("loaded_"+l,"_")]:!1}})},placeholder:"Pencarian"})};function Xe({columns:a,data:n,renderRowSubComponent:r,customPageIndex:i,customPageSize:p,customPageCount:d,loading:c,isColumnsSearchable:h,primaryKey:u,name:y,customPageTotal:g}){let f=X(e=>e.core.filter)||{},_=[];for(let e=0;e<a.length;e++)try{let t=S("sort_"+y+"_"+a[e][u],"_"),s=f[t];o(s)||m(s)||l(s)||_.push({id:a[e][u],desc:"desc"==s})}catch(e){}let{getTableProps:E,getTableBodyProps:Y,headerGroups:b,page:v,prepareRow:k,visibleColumns:D,gotoPage:T,setPageSize:R,state:{pageIndex:C,pageSize:M}}=ke({columns:a,data:n,defaultColumn:{Filter:t=>e.createElement(qe,Object.assign({},t,{name:y}))},initialState:{pageIndex:i,pageSize:p,sortBy:_},manualPagination:!0,pageCount:d,manualSortBy:!0,defaultCanSort:!0,isMultiSortEvent:()=>{}},De,Te,Re,Se),x=b[0].headers||[];w(()=>{let e={};for(let t=0;t<x.length;t++){let a=x[t];if(a){let t=S("sort_"+y+"_"+a[u],"_"),s=a.isSorted?a.isSortedDesc?"desc":"asc":null;s!=f[t]&&(e[t]=s)}}o(e)||O({type:"SET_MULTI_FILTER",payload:{...e,[S("loaded_"+y,"_")]:!1}})},500,[x]);let[P,V]=t(c),[H,N]=t(C),O=J(),U=e=>{R(Number(e.target.value)),O({type:"SET_MULTI_FILTER",payload:{[S("load_"+y,"_")]:Number(e.target.value),[S("page_"+y,"_")]:H}})},j=e=>{let t=e.target.value?Number(e.target.value):0;q(t)},B=i<d,G=i>=2,W=()=>{H<d&&q(H+1)},K=()=>{H>=2&&q(H-1)},q=e=>{N(e)};return w(()=>{T(H),O({type:"SET_MULTI_FILTER",payload:{[S("load_"+y,"_")]:M,[S("page_"+y,"_")]:H}})},500,[H]),s(()=>{V&&!c?setTimeout(()=>V(c),500):V(c)},[c]),o(y)?e.createElement("p",null,"Props name is Required"):e.createElement("div",null,e.createElement("div",{className:"custom-scroll",style:{overflow:"auto"}},e.createElement(A,null,e.createElement(L,{style:{border:"none",zIndex:0},variant:"primary",onClick:()=>q(1),disabled:!G||c},e.createElement(se,{icon:re})),e.createElement(L,{style:{border:"none",zIndex:0},variant:"primary",onClick:K,disabled:!G||c},e.createElement(se,{icon:ie})),e.createElement(A.Text,{style:{background:"none"}},e.createElement(se,{icon:ge}),"   Hal :"," "),e.createElement(F.Control,{style:{borderLeft:"none",borderRight:"none",minWidth:72,zIndex:0},type:"number",min:1,max:d,value:H,onChange:j}),e.createElement(A.Text,{style:{background:"none"}},e.createElement(se,{icon:pe}),"   Lihat :"," "),e.createElement(F.Control,{type:"number",min:1,style:{borderLeft:"none",borderRight:"none",minWidth:72,zIndex:0},max:50,value:M,onChange:U}),e.createElement(L,{style:{border:"none",zIndex:0},variant:"primary",onClick:W,disabled:!B||c},e.createElement(se,{icon:de})),e.createElement(L,{style:{border:"none",zIndex:0},variant:"primary",onClick:()=>q(d),disabled:!B||c},e.createElement(se,{icon:ce})))),e.createElement("div",{className:"text-center mt-2 mb-2"},e.createElement("strong",null,I(i,""))," dari"," ",e.createElement("strong",null,I(d,""))," hal. Total"," : ",e.createElement("strong",null,I(g,""))," baris"),e.createElement(z,Object.assign({style:{margin:0,zIndex:0},responsive:!0,bordered:!0,hover:!0,striped:!0,vcenter:!0},E()),e.createElement("thead",null,b.map(t=>e.createElement("tr",t.getHeaderGroupProps(),t.headers.map(t=>e.createElement("th",Object.assign({style:{padding:"4px 8px",borderTop:"1px solid #dee2e6"}},t.getHeaderProps()),e.createElement("div",t.getSortByToggleProps(),e.createElement("span",{style:{display:"inline-block"}},t.render("Header")),e.createElement("span",{style:{display:"inline-block",fontWeight:"bold"}},(e=>e.isSorted?e.isSortedDesc?" ↓":" ↑":"")(t))),h&&e.createElement(Ke,{column:t})))))),e.createElement("tbody",Y(),v.length>0&&!P&&parseInt(i)===parseInt(H)?v.map(t=>(k(t),e.createElement(e.Fragment,{key:t.getRowProps().key},e.createElement("tr",null,t.cells.map((t,a)=>e.createElement("td",Object.assign({style:{padding:"4px 8px",width:0==a?"10px":"auto"}},t.getCellProps()),t.render("Cell")))),t.isExpanded&&e.createElement("tr",null,e.createElement("td",{style:{padding:"4px 8px"},colSpan:D.length},r(t)))))):b.map(t=>e.createElement("tr",null,e.createElement("td",{style:{padding:"12px 0",textAlign:"center"},colSpan:t.headers.length},P||parseInt(i)!==parseInt(H)?"Memproses":"Tidak ada data"))))),e.createElement("div",{className:"text-center mt-2 mb-2"},e.createElement("strong",null,I(i,""))," dari"," ",e.createElement("strong",null,I(d,""))," hal. Total"," : ",e.createElement("strong",null,I(g,""))," baris"),e.createElement("div",{className:"custom-scroll",style:{overflow:"auto"}},e.createElement(A,null,e.createElement(L,{style:{border:"none",zIndex:0},variant:"primary",onClick:()=>q(1),disabled:!G||c},e.createElement(se,{icon:re})),e.createElement(L,{style:{border:"none",zIndex:0},variant:"primary",onClick:K,disabled:!G||c},e.createElement(se,{icon:ie})),e.createElement(A.Text,{style:{background:"none"}},e.createElement(se,{icon:ge}),"   Hal :"," "),e.createElement(F.Control,{style:{borderLeft:"none",borderRight:"none",minWidth:72,zIndex:0},type:"number",min:1,max:d,value:H,onChange:j}),e.createElement(A.Text,{style:{background:"none"}},e.createElement(se,{icon:pe}),"   Lihat :"," "),e.createElement(F.Control,{type:"number",min:1,style:{borderLeft:"none",borderRight:"none",minWidth:72,zIndex:0},max:50,value:M,onChange:U}),e.createElement(L,{style:{border:"none",zIndex:0},variant:"primary",onClick:W,disabled:!B||c},e.createElement(se,{icon:de})),e.createElement(L,{style:{border:"none",zIndex:0},variant:"primary",onClick:()=>q(d),disabled:!B||c},e.createElement(se,{icon:ce})))))}function Je(n){let[d,c]=t(!1),[m,u]=t(""),[_,Y]=t([]),[b,v]=t([]),[k,D]=t({}),[T,R]=t(!1),[M,x]=t(!1),I=J(),P=(X(e=>e.core.parameter),X(e=>e.core.input)||{}),V=X(e=>e.auth.user)||{},H=X(e=>e.core.filter)||{},N=S("selected_"+n.name,"_"),O=n.primaryKey?n.primaryKey:"id",z={Header:"#",id:"select",width:"10px",Cell:t=>{let a=X(e=>e.core.input),s=!1;try{s="single"==n.selectable?C(N,a)==t.row.original[O]:g(C(N,a),function(e){return e==t.row.original[O]})>-1}catch(e){}return e.createElement(F.Check,{inline:!0,id:S(n.name+"_check_"+t.row.original[O],"_"),name:S(n.name+"_check_"+t.row.original[O],"_"),type:"single"==n.selectable?"radio":"checkbox",value:1,checked:s,disabled:n.isReadonly,onChange:()=>function(e,t,a=!1){let s=e.row.original||{};if("single"==n.selectable)I({type:"SET_PARAMETER",payload:{key:N,value:s}}),I({type:"SET_INPUT",payload:{key:N,value:s[O]}});else{let e=[];a?e=r(C(N,t),e=>e&&s&&parseInt(e)!=parseInt(s[O]))||[]:(e=C(N,t)||[],p(e)||(e=[]),e.push(s[O])),e=E(e),I({type:"SET_INPUT",payload:{key:N,value:e}})}}(t,a,s)})}},K=a(),q=Ce(K),Q=o(n.selectable)?[...n.columns]:[z,...n.columns];if(n.action){let t={Header:"Aksi",id:"aksi_"+n.name,sortable:!1,Cell:t=>{let a=X(e=>e.core.parameter),s=t.row.original[O];return e.createElement(G,{key:"dropdown_"+n.name+"_"+s,id:"dropdown_"+n.name+"_"+s,isOpen:i(a.dropdown,s),toggle:()=>function(e){let t=i(a.dropdown,e)?null:e;I({type:"SET_PARAMETER",payload:{key:"dropdown",value:t}})}(s),drop:"end",variant:"primary",title:""},r(n.action,function(e){return l(e.show)||e.show}).map((a,l)=>{let o=!!f(a.disabled)&&a.disabled;return e.createElement(W.Item,{key:"dropdownitem_"+n.name+"_"+s+"_"+l,onClick:()=>a.onClick(t.row.original),disabled:o},a.label)}))}};Q=o(n.selectable)?[t,...n.columns]:[t,z,...n.columns]}function Z(){d&&(u(window.location.href),n.onReload(),C(S("loaded_"+n.name,"_"),H)||I({type:"SET_FILTER",payload:{key:S("loaded_"+n.name,"_"),value:!0}}))}s(()=>{q!=d&&c(q)}),s(()=>{I({type:"SET_FILTER",payload:{key:S("loaded_"+n.name,"_"),value:!1}})},[]),w(()=>{!d||i(window.location.href,m)&&!o(m)||Z()},500,[d,window.location.href]),w(Z,500,[C(S("keyword_"+n.name,"_"),H),C(S("page_"+n.name,"_"),H),C(S("load_"+n.name,"_"),H),C(S("loaded_"+n.name,"_"),H)]),w(()=>{v(e=>y([...e,..._],O)),C(N,P)&&function(){let e=null,t=null;if("single"==n.selectable)e=e=h(b,e=>e&&parseInt(e[O])==t)||{},t=C(N,P)||null;else{e=[],t=C(N,P)||[];for(let a=0;a<t.length;a++){let s=h(b,e=>e&&parseInt(e[O])==t[a])||{};o(s)||e.push(s)}}I({type:"SET_PARAMETER",payload:{key:N,value:e}})}()},500,[C(N,P),H]),w(()=>{try{Y(n.data.data||[])}catch(e){}v(e=>y([...e,..._],O));try{D(n.data.meta||{})}catch(e){}},500,[n.data]);let $=e.useMemo(()=>Q,[]),ee=!1;try{ee="admin"==V.role}catch(e){}return e.createElement(We,{isLoading:n.isLoading},e.createElement("div",{style:{padding:"8px 12px"},ref:K},e.createElement("div",{style:{marginBottom:"12px"}},e.createElement(U,null,e.createElement(j,{xs:"12",sm:"12",md:"8",lg:"8"},e.createElement("div",null,n.renderFilter?n.renderFilter:null))),e.createElement(U,{style:{justifyContent:"flex-end"}},e.createElement(j,{xs:"12",sm:"12",md:"4",lg:"4"},e.createElement("div",null,n.isSearchable&&e.createElement("div",null,e.createElement(A,null,e.createElement(A.Text,{style:{background:"none"}},e.createElement(se,{icon:ne})),e.createElement(F.Control,{id:S("keyword_"+n.name,"_"),key:S("keyword_"+n.name,"_"),style:{borderLeft:"none"},className:"form-control",value:C(S("keyword_"+n.name,"_"),H),onChange:e=>{I({type:"SET_MULTI_FILTER",payload:{[S("keyword_"+n.name,"_")]:e.target.value,[S("page_"+n.name,"_")]:1,loaded:!1}})},type:"text",id:S("keyword_"+N),name:S("keyword_"+n.name,"_"),placeholder:"Pencarian"}),e.createElement(L,{style:{zIndex:0},variant:"primary",onClick:Z,type:"button",disabled:n.isLoading},e.createElement(se,{icon:me,spin:n.isLoading})),(n.export||n.import)&&e.createElement(e.Fragment,null,n.export&&e.createElement(L,{id:"exportFile",style:{zIndex:0},variant:"primary",className:"mr-1",onClick:n.exportReload,type:"button",disabled:n.disabledButton},e.createElement(se,{icon:fe}),e.createElement(B,{placement:"top",isOpen:T,autohide:!1,target:"exportFile",toggle:()=>R(!T)},"Export")),n.import&&e.createElement(L,{id:"importFile",style:{zIndex:0},variant:"primary",className:"mr-1",onClick:n.importReload,type:"button",disabled:n.disabledButton},e.createElement(se,{icon:_e}),e.createElement(B,{placement:"top",isOpen:M,autohide:!1,target:"importFile",toggle:()=>x(!M)},"Import"))))))))),e.createElement(Xe,{name:S(n.name,"_"),columns:$,data:_,primaryKey:O,isColumnsSearchable:n.isColumnsSearchable,fetchData:Z,loading:n.isLoading,customPageTotal:k&&!o(k)?k.total:0,customPageCount:k&&!o(k)?k.last_page:1,customPageSize:k&&!o(k)?k.per_page:C(S("load_"+n.name,"_"),H)?C(S("load_"+n.name,"_"),H):10,customPageIndex:k&&!o(k)?k.current_page:C(S("page_"+n.name,"_"),H)?C(S("page_"+n.name,"_"),H):1})))}function Qe(t){let a=[];if(p(t.errorMessage))for(let e=0;e<t.errorMessage.length;e++){let s=t.errorMessage[e];if(p(s))for(let e=0;e<s.length;e++)a.push(s[e]);else a.push(s)}else a.push(t.errorMessage);return e.createElement(F.Group,{as:U},e.createElement(F.Label,{column:!0,md:t.labelSize?t.labelSize:3},t.label?t.label:"Label",t.isRequired&&e.createElement("span",{className:"text-danger"}," *"),t.hint&&e.createElement("small",{className:"form-text text-muted"},t.hint)),e.createElement(j,{md:t.inputSize?t.inputSize:9},t.children,e.createElement(F.Text,{className:"text-danger"},a.length>0&&a.join(", "))))}let Ze="YYYY-MM-DD HH:mm:ss";const $e=t=>e.createElement(A,null,e.createElement(A.Text,{style:{background:"none"}},e.createElement(se,{icon:ye})),e.createElement(F.Control,{style:{borderLeft:"none",borderRight:"none",fontFamily:"inherit",fontSize:"inherit"},type:"text",className:"form-control",disabled:t.disabled,name:t.name,value:t.value||"",onClick:t.onClick}),e.createElement(A.Text,{style:{background:"none"}},e.createElement(se,{icon:Ee})));var et=Q(e=>({input:e.core.input||{}}),e=>({setInput:(t,a)=>e({type:"SET_INPUT",payload:{key:S(String(t),"_"),value:a}})}))(class extends e.Component{constructor(e){super(e),this.handleInputChange=e=>{e=ae(e,Ze).isValid()?ae(e,Ze).format(Ze):null,this.props.setInput(this.props.name,e),this.onRefresh()},this.handleInputChangeStart=e=>{e=ae(e,Ze).isValid()?ae(e,Ze).format(Ze):null,this.props.setInput("start_"+this.props.name,e),this.onRefresh()},this.handleInputChangeEnd=e=>{e=ae(e,Ze).isValid()?ae(e,Ze).format(Ze):null,this.props.setInput("end_"+this.props.name,e),this.onRefresh()},this.checkTglMerah=e=>{const t=ae(e).format("d");return 5==t||6==t?"tglmerah":void 0},this.state={selected:null,start_selected:null,end_selected:null},this.onRefresh=_.debounce(this.onRefresh.bind(this),200)}onRefresh(){if(this.props.isRange){let e=null,t=null;try{e=ae(this.props.start_selected,Ze).isValid()?ae(this.props.start_selected,Ze).toDate():ae(C("start_"+this.props.name,this.props.input),Ze).isValid()?ae(C("start_"+this.props.name,this.props.input),Ze).toDate():null}catch(e){}try{t=ae(this.props.end_selected,Ze).isValid()?ae(this.props.end_selected,Ze).toDate():ae(C("end_"+this.props.name,this.props.input),Ze).isValid()?ae(C("end_"+this.props.name,this.props.input),Ze).toDate():null}catch(e){}this.setState({start_selected:e,end_selected:t})}else{let e=null;try{e=ae(this.props.selected,Ze).isValid()?ae(this.props.selected,Ze).toDate():ae(C(this.props.name,this.props.input),Ze).isValid()?ae(C(this.props.name,this.props.input),Ze).toDate():null}catch(e){}this.setState({selected:e})}}componentDidMount(){this.onRefresh()}componentDidUpdate(e,t){this.props.isRange||C(this.props.name,e.input)==C(this.props.name,this.props.input)||C(this.props.name,this.props.input)==this.state.selected||this.onRefresh(),this.props.isRange&&C("start_"+this.props.name,e.input)!=C("start_"+this.props.name,this.props.input)&&C("start_"+this.props.name,this.props.input)!=this.state.start_selected&&this.onRefresh(),this.props.isRange&&C("end_"+this.props.name,e.input)!=C("end_"+this.props.name,this.props.input)&&C("end_"+this.props.name,this.props.input)!=this.state.end_selected&&this.onRefresh()}render(){return this.props.isRange?this.props.disabled||this.props.isReadonly?e.createElement("div",{className:"input-daterange input-group"},ae(this.state.start_selected,Ze).isValid()?ae(this.state.start_selected,Ze).format("DD-MM-YYYY HH:mm:ss"):null,e.createElement("span",{style:{background:"none"}},"  s/d  "),ae(this.state.end_selected,Ze).isValid()?ae(this.state.end_selected,Ze).format("DD-MM-YYYY HH:mm:ss"):null):e.createElement("div",{className:"input-daterange input-group",style:{background:"none"}},e.createElement(ue,{minDate:ae(this.props.minDate,Ze).isValid()?ae(this.props.minDate,Ze).toDate():null,maxDate:ae(this.props.maxDate,Ze).isValid()?ae(this.props.maxDate,Ze).toDate():null,dateFormat:this.props.dateFormat?this.props.dateFormat:"yyyy-MM-dd HH:mm:ss",placeholder:this.props.placeholder?this.props.placeholder:"Tanggal & Waktu",selected:this.state.start_selected,isClearable:!0,customInput:e.createElement($e,{value:this.state.start_selected,name:"start_"+this.props.name}),onChange:this.handleInputChangeStart,timeInputLabel:"Waktu : ",showTimeInput:!0,selectsStart:!0,peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,name:"start_"+this.props.name,todayButton:"Hari ini",dayClassName:this.checkTglMerah,dropdownMode:"select",startDate:this.state.start_selected,endDate:this.state.end_selected,shouldCloseOnSelect:!1}),e.createElement("span",{className:"input-group-addon",style:{background:"none"}},"  -  "),e.createElement(ue,{minDate:ae(this.state.start_selected,Ze).isValid()?ae(this.state.start_selected,Ze).toDate():ae(this.props.minDate,Ze).isValid()?ae(this.props.minDate,Ze).toDate():null,maxDate:ae(this.props.maxDate,Ze).isValid()?ae(this.props.maxDate,Ze).toDate():null,dateFormat:this.props.dateFormat?this.props.dateFormat:"yyyy-MM-dd HH:mm:ss",placeholder:this.props.placeholder?this.props.placeholder:"Tanggal & Waktu",selected:this.state.end_selected,isClearable:!0,name:"end_"+this.props.name,selectsEnd:!0,timeInputLabel:"Waktu : ",showTimeInput:!0,customInput:e.createElement($e,{value:this.state.end_selected,name:"end_"+this.props.name}),onChange:this.handleInputChangeEnd,peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dayClassName:this.checkTglMerah,todayButton:"Hari ini",dropdownMode:"select",startDate:this.state.start_selected,endDate:this.state.end_selected,shouldCloseOnSelect:!1})):this.props.disabled||this.props.isReadonly?e.createElement("div",{className:"input-daterange input-group"},ae(this.state.selected,Ze).isValid()?ae(this.state.selected,Ze).format("DD-MM-YYYY HH:mm:ss"):null):e.createElement(ue,{minDate:ae(this.props.minDate,Ze).isValid()?ae(this.props.minDate,Ze).toDate():null,maxDate:ae(this.props.maxDate,Ze).isValid()?ae(this.props.maxDate,Ze).toDate():null,dateFormat:this.props.dateFormat?this.props.dateFormat:"yyyy-MM-dd HH:mm:ss",placeholder:this.props.placeholder?this.props.placeholder:"Tanggal & Waktu",selected:this.state.selected,isClearable:!0,id:this.props.name,className:"form-control",customInput:e.createElement($e,{value:this.state.selected,name:this.props.name}),dayClassName:this.checkTglMerah,onChange:this.handleInputChange,peekNextMonth:!0,timeInputLabel:"Waktu : ",showTimeInput:!0,showMonthDropdown:!0,showYearDropdown:!0,todayButton:"Hari ini",dropdownMode:"select",shouldCloseOnSelect:!1})}});function tt(){return e.createElement(se,{style:{position:"absolute",left:8,top:11},icon:Ee})}ae();var at=Q(e=>({input:e.core.input||{}}),e=>({setInput:(t,a)=>e({type:"SET_INPUT",payload:{key:S(String(t),"_"),value:a}})}))(class extends e.Component{constructor(e){super(e),this.handleInputChange=e=>{e=ae(e,"HH:mm:ss").isValid()?ae(e,"HH:mm:ss").format("HH:mm:ss"):null,this.props.setInput(this.props.name,e),this.onRefresh()},this.handleInputChangeStart=e=>{e=ae(e,"HH:mm:ss").isValid()?ae(e,"HH:mm:ss").format("HH:mm:ss"):null,this.props.setInput("start_"+this.props.name,e),this.onRefresh()},this.handleInputChangeEnd=e=>{e=ae(e,"HH:mm:ss").isValid()?ae(e,"HH:mm:ss").format("HH:mm:ss"):null,this.props.setInput("end_"+this.props.name,e),this.onRefresh()},this.state={selected:null,start_selected:null,end_selected:null},this.onRefresh=c(this.onRefresh.bind(this),200)}componentDidUpdate(e,t){this.props.isRange||C(this.props.name,e.input)==C(this.props.name,this.props.input)||C(this.props.name,this.props.input)==this.state.selected||this.onRefresh(),this.props.isRange&&C("start_"+this.props.name,e.input)!=C("start_"+this.props.name,this.props.input)&&C("start_"+this.props.name,this.props.input)!=this.state.start_selected&&this.onRefresh(),this.props.isRange&&C("end_"+this.props.name,e.input)!=C("end_"+this.props.name,this.props.input)&&C("end_"+this.props.name,this.props.input)!=this.state.end_selected&&this.onRefresh()}onRefresh(){if(this.props.isRange){let e=ae(),t=ae();try{e=ae(this.props.start_selected,"HH:mm:ss").isValid()?ae(this.props.start_selected,"HH:mm:ss"):ae(C("start_"+this.props.name,this.props.input),"HH:mm:ss").isValid()?ae(C("start_"+this.props.name,this.props.input),"HH:mm:ss"):null}catch(e){}try{t=ae(this.props.end_selected,"HH:mm:ss").isValid()?ae(this.props.end_selected,"HH:mm:ss"):ae(C("end_"+this.props.name,this.props.input),"HH:mm:ss").isValid()?ae(C("end_"+this.props.name,this.props.input),"HH:mm:ss"):null}catch(e){}this.setState({start_selected:e,end_selected:t})}else{let e=ae();try{e=ae(this.props.selected,"HH:mm:ss").isValid()?ae(this.props.selected,"HH:mm:ss"):ae(C(this.props.name,this.props.input),"HH:mm:ss").isValid()?ae(C(this.props.name,this.props.input),"HH:mm:ss"):null}catch(e){}this.setState({selected:e})}}componentDidMount(){this.onRefresh()}render(){return this.props.isRange?this.props.disabled||this.props.isReadonly?e.createElement("div",{className:"input-daterange input-group"},ae(this.state.start_selected,"HH:mm:ss").isValid()?ae(this.state.start_selected,"HH:mm:ss").format("HH:mm:ss"):"",e.createElement("span",{style:{background:"none"}},"  s/d  "),ae(this.state.end_selected,"HH:mm:ss").isValid()?ae(this.state.end_selected,"HH:mm:ss").format("HH:mm:ss"):""):e.createElement("div",{className:"input-daterange input-group"},e.createElement(Me,{value:this.state.start_selected,disabled:this.props.disabled||this.props.isReadonly,inputIcon:e.createElement(tt,null),format:"HH:mm:ss",onChange:this.handleInputChangeStart}),e.createElement("span",{className:"input-group-addon",style:{background:"none"}},"  -  "),e.createElement(Me,{value:this.state.end_selected,disabled:this.props.disabled||this.props.isReadonly,inputIcon:e.createElement(tt,null),format:"HH:mm:ss",onChange:this.handleInputChangeEnd})):this.props.disabled||this.props.isReadonly?e.createElement("div",{className:"input-daterange input-group"},ae(this.state.selected,"HH:mm:ss").isValid()?ae(this.state.selected,"HH:mm:ss").format("HH:mm:ss"):""):e.createElement(Me,{value:this.state.selected,disabled:this.props.disabled||this.props.isReadonly,inputIcon:e.createElement(tt,null),format:"HH:mm:ss",onChange:this.handleInputChange})}}),st=Q(e=>({input:e.core.input||{}}),e=>({setInput:(t,a)=>e({type:"SET_INPUT",payload:{key:S(String(t),"_"),value:a}})}))(class extends e.Component{constructor(t){super(t),this.state={tags:[],suggestions:[],separator:"|"},this.reactTags=e.createRef()}onDelete(e){let t=this.state.tags.slice(0);t.splice(e,1),this.setState({tags:t}),this.props.name&&this.props.setInput(this.props.name,_.map(t,"name").join(this.state.separator))}onAddition(e){let t=[].concat(this.state.tags,e);this.setState({tags:_.uniqBy(t,"name")}),this.props.name&&this.props.setInput(this.props.name,_.map(t,"name").join(this.state.separator))}onFocus(e){}onValidate(e){return _.findIndex(this.state.tags,["name",e.name])<0}componentDidMount(){let e=[],t=[];for(let t=0;t<this.props.options.length;t++){let a=this.props.options[t];_.isEmpty(a[this.props.optionValue])||e.push({name:a[this.props.optionValue]})}let a="";try{a=this.props.value?this.props.value:this.props.input[this.props.name]?this.props.input[this.props.name]:""}catch(e){}let s=a?String(a).split(this.state.separator):[];for(let e=0;e<s.length;e++){let a=s[e];_.isEmpty(a)||t.push({name:a})}this.setState({suggestions:e,tags:t})}render(){return e.createElement(xe,{minQueryLength:1,noSuggestionsText:"Tidak ada usulan",ref:this.reactTags,tags:this.state.tags,id:this.props.name,removeButtonText:"Klik untuk menghapus",delimiters:["Enter","Tab"],placeholderText:this.props.placeholder?this.props.placeholder:"Dipisah dengan spasi / enter",allowNew:this.props.isCreateable,suggestions:this.state.suggestions,onDelete:this.onDelete.bind(this),onValidate:this.onValidate.bind(this),onFocus:this.onFocus.bind(this),onAddition:this.onAddition.bind(this)})}}),nt=Q(e=>({input:e.core.input||{}}),e=>({setInput:(t,a)=>e({type:"SET_INPUT",payload:{key:S(String(t),"_"),value:a}})}))(class extends e.Component{constructor(e){super(e),this.labelGenerate=e=>{if(!o(e)){if(p(this.props.optionLabel)){let t=[],a=this.props.separator?this.props.separator:" | ";for(let a=0;a<=this.props.optionLabel.length-1;a++)t.push(e[this.props.optionLabel[a]]);return t.join(a)}return e[this.props.optionLabel]}return null},this.onChange=e=>{if(this.props.name)try{this.props.setInput(this.props.name,this.props.isMultiple?Y(e,this.props.optionValue):e[this.props.optionValue])}catch(e){this.props.setInput(this.props.name,null)}this.onRefresh()},this.openModal=()=>{this.setState({show:!this.state.show})},this.state={defaultValue:null,options:[],show:!1},this.onRefresh=c(this.onRefresh.bind(this),200)}onRefresh(){let e=null,t=null;if(this.props.value)e=this.props.value;else if(e=C(this.props.name,this.props.input)||[],this.props.isMultiple){t=[];for(let a=0;a<this.props.options.length;a++)for(let s=0;s<e.length;s++){let n=this.props.options[a],l=e[s];String(n[this.props.optionValue])==String(l)&&t.push(n)}}else t=h(this.props.options,function(t){return String(t[this.props.optionValue])==e}.bind(this));t=l(t)||m(t)?null:t,this.setState({defaultValue:t})}componentDidUpdate(e,t){i(C(this.props.name,e.input),C(this.props.name,this.props.input))||i(this.state.defaultValue,C(this.props.name,this.props.input))||this.onRefresh()}componentDidMount(){this.onRefresh()}render(){let t=[];try{for(let e=0;e<this.props.options.length;e++){let a=this.props.options[e];this.props.isHtml&&(a[this.props.name]=H(String(a[this.props.name]))),t.push(a)}}catch(e){}return this.props.disabled||this.props.isReadonly?this.labelGenerate(this.state.defaultValue):this.props.withModal?e.createElement(e.Fragment,null,e.createElement(Row,null,!this.props.isReadonly&&e.createElement(Col,{lg:"1",md:"1",sm:"3",xs:"1"},e.createElement(Button,{type:"button",className:"btn btn-icon btn-primary",onClick:this.openModal},e.createElement(se,{icon:ne})," Pilih")),e.createElement(Col,{lg:"11",md:"11",sm:"9",xs:"11"},!this.state.defaultValue||l(this.state.defaultValue)||o(this.state.defaultValue)?"":this.labelGenerate(this.state.defaultValue))),e.createElement(Modal,{backdrop:"static",autoFocus:!0,restoreFocus:!0,centered:!0,size:"xl",show:this.state.show,onHide:this.openModal},e.createElement(ModalHeader,{closeButton:!0,toggle:this.openModal},e.createElement(Modal.Title,null,this.props.placeholder||"Pilih")),e.createElement(ModalBody,null,e.createElement(Ie,{isClearable:!0,id:this.props.id?this.props.id:this.props.name,isSearchable:!0,isHtml:this.props.isHtml,isMulti:this.props.isMultiple,placeholder:this.props.placeholder?this.props.placeholder:"Pilih",getOptionLabel:this.labelGenerate,getOptionValue:e=>e[this.props.optionValue],noOptionsMessage:()=>"Data tidak ditemukan",value:this.state.defaultValue,onChange:this.onChange,options:t,isDisabled:this.props.disabled})))):e.createElement(Ie,{menuPortalTarget:document.body,menuPosition:"fixed",styles:{menuPortal:e=>({...e,fontFamily:"inherit",fontSize:"inherit",zIndex:9999}),menu:e=>({...e,fontFamily:"inherit",fontSize:"inherit",zIndex:"9999 !important"}),multiValueRemove:e=>({...e,color:"#db2828",cursor:"pointer"}),placeholder:e=>({...e,fontFamily:"inherit",fontSize:"inherit"}),multiValue:e=>({...e,background:"none"}),multiValueLabel:e=>({...e,fontFamily:"inherit",fontSize:"inherit"}),option:e=>({...e,fontFamily:"inherit",fontSize:"inherit"}),clearIndicator:(e,t)=>({...e,cursor:"pointer",color:"#db2828"})},className:"tcomponent-select",isClearable:!0,id:this.props.id?this.props.id:this.props.name,isSearchable:!0,isHtml:this.props.isHtml,isMulti:this.props.isMultiple,placeholder:this.props.placeholder?this.props.placeholder:"Pilih",getOptionLabel:this.labelGenerate,getOptionValue:e=>e[this.props.optionValue],noOptionsMessage:()=>"Data tidak ditemukan",value:this.state.defaultValue,onChange:this.onChange,options:t,isDisabled:this.props.disabled})}});function lt(a){let[n,l]=t(!1),[p,d]=t(!1),[c,m]=t(!1),[h,u]=t(!1),y=X(e=>e.auth)||{},g=X(e=>e.core.input)||{},f=X(e=>e.core.validation)||[],_=(X(e=>e.core.parameter),X(e=>e.core.filter)||{}),E=J(),[Y,b]=t({}),[v,k]=t({activity:{},role:"",response:[]}),{doAfterSubmit:D,isLoading:T,doSubmit:R,doCancel:C,isReadonly:I,relation:w,id:H,isDelete:N}=a,[A,O]=t(I);return s(()=>{O(I)},[I]),s(()=>{!function(){let e=process.env.REACT_APP_API_URL+"/komentar_respon?",t={data:M({relation:w,id:H}),method:"POST",headers:x(y),url:e};u(!0),Z(t).then(e=>{let t=e.data.data||{};N&&(t.response=r(t.response,function(e){return"HAPUS"==e.code})),k(t),u(!1)}).catch(e=>{P(e,E),u(!1)})}()},[]),s(()=>{let e=[];try{e=v.role.split(",")}catch(e){}let t=[];try{t=y.user.role.split(",")}catch(e){}let a=!1,s=!1;for(let e=0;e<t.length;e++)!s&&t[e]&&i(String(t[e]).trim().toLowerCase(),"admin")&&(s=!0,a=!0,E({type:"SET_INPUT",payload:{key:"response_role",value:String(t[e]).trim().toLowerCase()}}));if(!s)for(let s=0;s<e.length;s++)for(let n=0;n<t.length;n++)e[s]&&t[n]&&String(e[s]).trim().toLowerCase()==String(t[n]).trim().toLowerCase()&&!a&&(a=!0,E({type:"SET_INPUT",payload:{key:"response_role",value:String(t[n]).trim().toLowerCase()}}));!o(v.activity)&&v.response.length>0&&a&&A&&!I?(O(!1),E({type:"SET_INPUT",payload:{key:"activity",value:v.activity.code}})):O(!0)},[v]),s(()=>{c&&!o(f)&&m(!1)},[f]),s(()=>{!c||T||n||(m(!1),o(f)&&D&&D())},[n,f,T]),h?e.createElement(Ne,null):e.createElement(We,{isLoading:T||c},e.createElement(K,null,e.createElement(K.Body,null,e.createElement(K.Title,{tag:"h5"},v.activity.name||"Alur tidak ditemukan"),e.createElement(K.Text,null,!A&&e.createElement(U,null,e.createElement(j,{lg:"6"},e.createElement(F.Group,{as:U},e.createElement(j,{lg:"3"},e.createElement(F.Label,null,"Respon ",e.createElement("span",{className:"text-danger"},"*"))),e.createElement(j,{lg:"9"},e.createElement(nt,{name:"response_activity",options:v.response,separator:" | ",optionLabel:["name"],optionValue:"code"}))),e.createElement(F.Group,{as:U},e.createElement(j,{lg:"3"},e.createElement(F.Label,null,"Lampiran")),e.createElement(j,{lg:"5"},e.createElement(Fe,{value:g.attachment,name:"response_attachment",id:"response_attachment"})))),e.createElement(j,{lg:"6"},e.createElement(F.Group,{as:U},e.createElement(j,{lg:"3",style:{marginBottom:35}},e.createElement(F.Label,null,"Komentar")),e.createElement(j,{lg:"9"},e.createElement(He,{type:"textarea",required:!0,name:"response_comment",id:"response_comment",rows:"3"}))))),e.createElement(Je,{data:Y,isLoading:p,name:S(a.relation,"_"),primaryKey:"id",isSearchable:!0,isColumnsSearchable:!0,onReload:function(){let e=process.env.REACT_APP_API_URL+"/komentar?",t=["user","role","activity","comment","due_datetime","start_datetime","end_datetime"],s={};try{s=V(_,t,S(a.relation,"_"))}catch(e){}let n={relation:w,id:H,...s},l={data:M(n),method:"POST",headers:x(y),url:e};d(!0),Z(l).then(e=>{b(e.data.data),d(!1)}).catch(e=>{P(e,E),d(!1)})},columns:[{Header:"Nama",id:"user",accessor:e=>e.user},{Header:"Jabatan",id:"role",accessor:e=>e.role},{Header:"Aktifitas",id:"activity",accessor:e=>e.activity},{Header:"Respon",id:"response",accessor:e=>e.response},{Header:"Komentar",id:"comment",accessor:e=>e.comment},{Header:"Tenggat",id:"due_datetime",accessor:e=>e.due_datetime&&ae(e.due_datetime).format("DD-MM-YYYY HH:mm")},{Header:"Mulai",id:"start_datetime",accessor:e=>e.start_datetime&&ae(e.start_datetime).format("DD-MM-YYYY HH:mm")},{Header:"Selesai",id:"end_datetime",accessor:e=>e.end_datetime&&ae(e.end_datetime).format("DD-MM-YYYY HH:mm")},{Header:"Lampiran",id:"attachment",accessor:t=>e.createElement(Fe,{value:t.attachment,isReadonly:!0})}]})),e.createElement(U,{className:"mt-2"},e.createElement(j,null,e.createElement(L,{type:"button",className:"btn btn-icon btn-primary float-left",onClick:function(e){C&&C()}},"Kembali"),!A&&e.createElement(L,{type:"button",className:"btn btn-icon btn-primary float-right",onClick:function(e){!g.response_activity||o(g.response_activity)?E({type:"SET_MESSAGE",payload:"Respon wajib diisi"}):(m(!0),l(!0),setTimeout(()=>l(!1),1e3),R&&R())}},"Proses"))))))}function ot(t){return e.createElement(A,null,e.createElement(A.Text,{style:{background:"none"}},e.createElement(se,{icon:ye})),e.createElement(F.Control,{style:{borderLeft:"none",fontFamily:"inherit",fontSize:"inherit"},type:"text",className:"form-control",disabled:t.disabled,name:t.name,value:t.value||"",onClick:t.onClick}))}function rt(t){const a=l(null==t?void 0:t.name)?"":S(String(null==t?void 0:t.name),"_"),s=J(),n=X(e=>{var t;return null===(t=e.core)||void 0===t?void 0:t.input})||{};let o=C(a,n)||null,r=C("start_"+a,n)||null,i=C("end_"+a,n)||null;if(t.isRange){try{r=ae(r,"YYYY").isValid()?ae(r,"YYYY").toDate():null}catch(e){}try{i=ae(i,"YYYY").isValid()?ae(i,"YYYY").toDate():null}catch(e){}}else try{o=ae(o,"YYYY").isValid()?ae(o,"YYYY").toDate():null}catch(e){}function p(e,t){s({type:"SET_INPUT",payload:{key:S(String(e),"_"),value:ae(t,"YYYY").isValid()?ae(t,"YYYY").format("YYYY"):""}})}const d=t.dateFormat?t.dateFormat:"yyyy";return t.isRange?t.disabled||t.isReadonly?(ae(r,"YYYY").isValid()?ae(r,"YYYY").format("YYYY"):"")+" - "+(ae(i,"YYYY").isValid()?ae(i,"YYYY").format("YYYY"):""):e.createElement("div",{className:"input-daterange input-group"},e.createElement(ue,{minDate:ae(t.minDate,"YYYY").isValid()?ae(t.minDate,"YYYY").toDate():null,maxDate:ae(t.maxDate,"YYYY").isValid()?ae(t.maxDate,"YYYY").toDate():null,dateFormat:d,placeholder:t.placeholder?t.placeholder:"Tanggal",selected:r,isClearable:!t.disabled&&!t.isReadonly,customInput:e.createElement(ot,{value:r,name:"start_"+a}),onChange:function(e){e=ae(e,"YYYY").isValid()?ae(e,"YYYY").format("YYYY"):null,p("start_"+a,e)},selectsStart:!1,peekNextMonth:!1,showMonthDropdown:!1,showYearDropdown:!1,showYearPicker:!0,name:"start_"+a,todayButton:null,dropdownMode:"select",disabled:t.disabled||t.isReadonly,readOnly:t.disabled||t.isReadonly,startDate:r,endDate:i,shouldCloseOnSelect:!1}),e.createElement("span",{className:"input-group-addon",style:{background:"none"}},"  -  "),e.createElement(ue,{minDate:ae(r,"YYYY").isValid()?ae(r,"YYYY").toDate():ae(t.minDate,"YYYY").isValid()?ae(t.minDate,"YYYY").toDate():null,maxDate:ae(t.maxDate,"YYYY").isValid()?ae(t.maxDate,"YYYY").toDate():null,dateFormat:d,placeholder:t.placeholder?t.placeholder:"Tanggal",selected:i,isClearable:!t.disabled&&!t.isReadonly,name:"end_"+a,selectsEnd:!0,customInput:e.createElement(ot,{value:i,name:"end_"+a}),onChange:function(e){e=ae(e,"YYYY").isValid()?ae(e,"YYYY").format("YYYY"):null,p("end_"+a,e)},selectsStart:!1,peekNextMonth:!1,showMonthDropdown:!1,showYearDropdown:!1,showYearPicker:!0,todayButton:null,dropdownMode:"select",startDate:r,endDate:i,disabled:t.disabled||t.isReadonly,readOnly:t.disabled||t.isReadonly,shouldCloseOnSelect:!1})):t.disabled||t.isReadonly?ae(o,"YYYY").isValid()?ae(o,"YYYY").format("YYYY"):"":e.createElement(ue,{minDate:ae(t.minDate,"YYYY").isValid()?ae(t.minDate,"YYYY").toDate():null,maxDate:ae(t.maxDate,"YYYY").isValid()?ae(t.maxDate,"YYYY").toDate():null,dateFormat:d,placeholder:t.placeholder?t.placeholder:"Tanggal",customInput:e.createElement(ot,{value:o,name:a}),selected:o,isClearable:!t.disabled&&!t.isReadonly,id:a,className:"form-control",onChange:function(e){e=ae(e,"YYYY").isValid()?ae(e,"YYYY").format("YYYY"):null,p(a,e)},selectsStart:!1,peekNextMonth:!1,showMonthDropdown:!1,showYearDropdown:!1,showYearPicker:!0,todayButton:null,dropdownMode:"select",disabled:t.disabled||t.isReadonly,readOnly:t.disabled||t.isReadonly,shouldCloseOnSelect:!1})}let it;const pt=we(it||(it=(e=>e)`
   position: absolute;
   top: 50%;
   left: 50%;
   margin-top: -25px;
   margin-left: -50px;
`));function dt(){return e.createElement(he,{color:"#000",css:pt,size:50})}var ct=Q(e=>({input:e.core.input||{},parameter:e.core.parameter||{}}),e=>({setInput:(t,a)=>e({type:"SET_INPUT",payload:{key:S(String(t),"_"),value:a}}),setParameter:(t,a)=>e({type:"SET_PARAMETER",payload:{key:S(String(t),"_"),value:a}})}))(class extends e.Component{constructor(e){super(e),this.handleInputChange=e=>{this.props.setInput(this.props.name,e.hex),this.props.setParameter("selected_"+this.props.name,e)},this.toggle=()=>{this.setState({open:!this.state.open})},this.state={open:!1}}componentDidMount(){try{this.props.setInput(this.props.name,this.props.parameter["selected_"+this.props.name].hex)}catch(e){}}render(){let t="";try{t=C(this.props.name,this.props.input)||""}catch(e){}return e.createElement(e.Fragment,null,this.state.open?e.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px",zIndex:999}},e.createElement(Pe,{color:t,onChangeComplete:this.handleInputChange}),e.createElement(L,{style:{marginTop:10,backgroundColor:t,border:0},className:"btn btn-primary",onClick:this.toggle,type:"button"},"Pilih")):e.createElement(L,{style:{zIndex:0,backgroundColor:t,border:0},className:"btn btn-primary",onClick:this.toggle,type:"button"},"Pilih"))}});function mt(a){let[n,i]=t({}),[d,c]=t(!1),{isMultiple:m,optionLabel:h,separator:u,primaryKey:y,id:g,param:f}=a,_=S(a.name,"_"),E=S("selected_"+_,"_"),Y=J(),v=X(e=>e.auth)||{},k=X(e=>e.core.input)||{},D=X(e=>e.core.filter)||{},T=X(e=>e.core.parameter)||{};return s(()=>{let e=process.env.REACT_APP_API_URL+"/"+a.url,{keyword:t}=V(D,[],_),s=M({pkey:y,selected:[g],keyword:t,load:1,page:1,...f}),n={method:"POST",headers:x(v),url:e,data:s};c(!0),Z(n).then(e=>{i(e.data.data.data[0]),c(!1)}).catch(e=>{c(!1)})},[g]),e.createElement(e.Fragment,null,!n||l(n)||o(n)?d?e.createElement(Ne,null):"":[function(e){if(p(h)){let t=[];u=u||" | ";for(let a=0;a<=h.length-1;a++)e[h[a]]&&!l(e[h[a]])&&t.push(e[h[a]]);return t.join(u)}return e[h]?e[h]:""}(n),!a.isReadonly&&e.createElement(L,{variant:"link",onClick:function(e){if(i(null),b(a.optionValue)&&Object.keys(a.optionValue).map(function(e,t){Y({type:"SET_INPUT",payload:{key:a.optionValue[e],value:null}})}),m){let t=r(C(_,k),function(t){return t!=e}),a=r(C(E,k),function(t){return t!=e}),s=r(C(E,T),function(t){return t[y]!=e});Y({type:"SET_INPUT",payload:{key:_,value:t}}),Y({type:"SET_INPUT",payload:{key:E,value:a}}),Y({type:"SET_PARAMETER",payload:{key:E,value:s}})}else Y({type:"SET_INPUT",payload:{key:_,value:null}}),Y({type:"SET_INPUT",payload:{key:E,value:null}}),Y({type:"SET_PARAMETER",payload:{key:E,value:{}}})}.bind(null,n[y]),style:{borderRadius:100,zIndex:0}},e.createElement(se,{color:"#db2828",icon:oe}))])}function ht(n){let{isMultiple:d,defaultValue:c,optionLabel:h,separator:u}=n,y=J(),f=X(e=>e.auth)||{},_=X(e=>e.core.input)||{},v=X(e=>e.core.filter)||{},k=X(e=>e.core.parameter)||{},[D,T]=t(!1),[R,I]=t(!1),[P,H]=t(!1),[O,z]=t(!1),[B,G]=t({}),[W,K]=t(d?[]:{}),[q,Q]=t(0),[$,ee]=t(!1),[te,ae]=t(1),le=S(n.name,"_"),oe=S("selected_"+le,"_"),[re,ie]=t(n.label?n.label:C(le,_)),pe=a(),de=Ce(pe),[ce,he]=t([]),[ue,ye]=t({}),ge=n.primaryKey?n.primaryKey:"id";function fe(e){let t=[];if(u=u||" | ",p(h)){for(let a=0;a<=h.length-1;a++)e[h[a]]&&!l(e[h[a]])&&t.push(e[h[a]]);return t.join(u)}return e[h]?e[h]:""}let _e=[{Header:"#",id:le+"_check",Cell:t=>{let a=X(e=>e.core.input),s=!1,o=C(oe,a);try{s=d?g(o,function(e){return e===t.row.original[ge]})>-1:o===t.row.original[ge]}catch(e){}return t.row.original[ge]?e.createElement(F.Check,{inline:!0,id:S(le+"_check_"+t.row.original[ge],"_"),name:S(le+"_check_"+t.row.original[ge],"_"),style:{zIndex:100},type:d?"checkbox":"radio",value:1,checked:s,disabled:n.isReadonly,onChange:()=>function(e,t,a=!1){let s=e.row.original||{};if(d){let e=[],n=C(oe,t);a?e=r(n,e=>e&&s&&String(e)!=String(s[ge]))||[]:(e=n||[],p(e)||(e=[]),s[ge]&&e.push(s[ge])),e=E(e),e=r(e,e=>!m(e)&&!l(e))||[],y({type:"SET_INPUT",payload:{key:oe,value:e}})}else y({type:"SET_INPUT",payload:{key:oe,value:s[ge]}})}(t,a,s)}):null}},{Header:"Keterangan",id:"label",accessor:e=>fe(e)}];function Ee(){$&&ve()}w(function(){if(d){let e=r(C(oe,_),function(e){return!m(e)&&!l(e)})||[];if(e.length>0){let t=process.env.REACT_APP_API_URL+"/"+n.url,{keyword:a}=V(v,[],le),s=M({pkey:ge,selected:e,keyword:a,load:e.length,page:1,...n.parameter}),l={method:"POST",headers:x(f),url:t,data:s};H(!0),Z(l).then(e=>{y({type:"SET_PARAMETER",payload:{key:oe,value:e.data.data.data}}),ke(e.data.data.data),H(!1)}).catch(e=>{H(!1)})}else y({type:"SET_PARAMETER",payload:{key:oe,value:null}})}else{let e=C(oe,_)||null;if(e){let t=process.env.REACT_APP_API_URL+"/"+n.url,{keyword:a}=V(v,[],le),s=M({pkey:ge,selected:[e],keyword:a,load:1,page:1,...n.parameter}),l={method:"POST",headers:x(f),url:t,data:s};H(!0),Z(l).then(e=>{let t=e.data.data.data[0]||{};y({type:"SET_PARAMETER",payload:{key:oe,value:t}}),ke(t),H(!1)}).catch(e=>{H(!1)})}else y({type:"SET_PARAMETER",payload:{key:oe,value:null}})}},500,[C(oe,_)]),w(Ee,500,[C("keyword_"+le,v),C("page_"+le,v),C("load_"+le,v)]);let Ye=e.useMemo(()=>_e,[]);function be(){ee(!1)}function ve(){let e=process.env.REACT_APP_API_URL+"/"+n.url,{page:t,load:a,keyword:s,sorted:l,search:o}=V(v,[],le),r=M({pkey:ge,page:t,load:a,keyword:s,sorted:l,search:o,...n.parameter}),i={method:"POST",headers:x(f),url:e,data:r};return z(!0),Z(i).then(e=>{let t=e.data||{};if(void 0!==t.data.data){Q(t.data.meta.last_page);try{he(t.data.data||[])}catch(e){}try{ye(t.data.meta||{})}catch(e){}}else if(void 0!==t.data){Q(t.meta.last_page);try{he(t.data||[])}catch(e){}try{ye(t.meta||{})}catch(e){}}z(!1)}).catch(e=>{z(!1)})}function ke(e){d?function(e){if(b(n.optionValue))Object.keys(n.optionValue).map(function(t,a){let s=n.optionValue[t],l=null;if(e)try{l=E(Y(e,t))}catch(e){}i(C(s,_),l)||y({type:"SET_INPUT",payload:{key:s,value:l}})});else{let t=le,a=null;e&&(a=E(Y(e,ge))),i(C(t,_),a)||y({type:"SET_INPUT",payload:{key:t,value:a}})}}(e):function(e){if(b(n.optionValue))Object.keys(n.optionValue).map(function(t,a){let s=n.optionValue[t],l=null;if(e)try{l=e[t]}catch(e){}i(C(s,_),l)||y({type:"SET_INPUT",payload:{key:s,value:l}})});else{let t=le,a=null;e&&(a=e[ge]),i(C(t,_),a)||y({type:"SET_INPUT",payload:{key:t,value:a}})}}(e)}s(()=>{i(n.parameter,B)||(G(n.parameter),Ee()),de!=D&&T(de)}),s(()=>{y({type:"SET_FILTER",payload:{key:S("show_"+le,"_"),value:$}})},[$]),s(function(){if(D){let e=null;try{d?(e=Y(c,"value"),e=r(e,e=>e)||[]):e=c.value||null}catch(e){}let t=C(oe,_)||null;i(e,t)||(m(e)&&!m(t)?y({type:"SET_INPUT",payload:{key:oe,value:t}}):!m(e)&&m(t)?y({type:"SET_INPUT",payload:{key:oe,value:e}}):m(e)||m(t)?y({type:"SET_INPUT",payload:{key:oe,value:null}}):y({type:"SET_INPUT",payload:{key:oe,value:e}}))}},[D]),s(()=>{let e=null;try{e=d?r(Y(c,"value"),e=>e)||null:c.value||null}catch(e){}e&&y({type:"SET_INPUT",payload:{key:oe,value:e}})},[]);let De=[],Te=C(oe,_);try{De=d?p(Te)?Te:[]:Te?[Te]:[]}catch(e){}let Re=C(oe,k),Se=null;try{Se=d?p(Re)?Re:[]:b(Re)?Re:{}}catch(e){}return e.createElement("div",{ref:pe},e.createElement(U,null,!n.isReadonly&&e.createElement(j,{lg:"2",md:"2",sm:"4",xs:"12"},e.createElement(L,{style:{zIndex:0},variant:"primary",type:"button",className:"btn-icon",onClick:function(){y({type:"SET_FILTER",payload:{key:S("page_"+le,"_"),value:1}}),ee(e=>!e),ve()}},e.createElement(se,{icon:ne}))),e.createElement(j,{lg:"10",md:"10",sm:"8",xs:"12"},P?e.createElement(Ne,null):De.map((t,a)=>e.createElement(e.Fragment,null,e.createElement(mt,{isReadonly:n.isReadonly,name:le,optionLabel:h,separator:u,param:n.parameter,url:n.url,primaryKey:ge,isMultiple:d,id:t}),n.isReadonly?De.length-1==a?null:", ":null)))),e.createElement(N,{backdrop:"static",autoFocus:!0,restoreFocus:!0,centered:!0,size:"xl",show:$,onHide:be},e.createElement(N.Header,{onHide:be,closeButton:!0},e.createElement(N.Title,null,n.placeholder||"Pilih")),e.createElement(N.Body,null,e.createElement(We,{isLoading:O},e.createElement("div",null,e.createElement(A,{style:{marginBottom:12}},e.createElement(A.Text,{style:{background:"none"}},e.createElement(se,{icon:ne})),e.createElement(F.Control,{style:{borderLeft:"none",zIndex:0},className:"form-control",value:C("keyword_"+le,v),onChange:e=>{y({type:"SET_MULTI_FILTER",payload:{["keyword_"+le]:e.target.value,["page_"+le]:1}})},type:"text",id:"search_"+oe,name:"search_"+le,placeholder:"Pencarian"}),e.createElement(L,{style:{zIndex:0},variant:"primary",onClick:Ee,type:"button",disabled:n.isLoading},e.createElement(se,{icon:me,spin:n.isLoading}))),e.createElement(Xe,{name:le,columns:Ye,data:ce,primaryKey:ge,isColumnsSearchable:!0,fetchData:Ee,loading:O,customPageTotal:ue&&!o(ue)?ue.total:0,customPageCount:ue&&!o(ue)?ue.last_page:1,customPageSize:ue&&!o(ue)?ue.per_page:v["load_"+le]?v["load_"+le]:5,customPageIndex:ue&&!o(ue)?ue.current_page:v["page_"+le]?v["page_"+le]:1}))),!O&&e.createElement("div",{style:{marginTop:12}},e.createElement("p",null,"Dipilih : "),P&&e.createElement(Ne,null),e.createElement("ul",null,d?Se&&Se.map((t,a)=>e.createElement("li",null,l(t)||o(t)?"":fe(t))):Se&&e.createElement("li",null,l(Se)||o(Se)?"":fe(Se)))))))}function ut(t){let a={chart:{width:"auto"}},s=t.series||[];if((l(t.series)||m(t.series)||!p(t.series))&&p(t.options)&&!l(t.optionValue)&&!m(t.optionValue))for(var n=0;n<t.options.length;n++)if(d(t.optionValue))s.push(t.options[n][t.optionValue]);else if(v(t.optionValue)){let e={};Object.keys(t.optionValue).map((a,s)=>{e[t.optionValue[a]]=t.options[n][a]}),s.push(e)}else if(p(t.optionValue)){let e=[];for(var o=0;o<t.optionValue.length;o++)e.push(t.options[n][t.optionValue[o]]);s.push(e)}l(t.dataLabels)||m(t.dataLabels)||!v(t.dataLabels)||(a.dataLabels=t.dataLabels);let r=" ";if(l(t.separator)||m(t.separator)||!v(t.separator)||(r=t.separator),l(t.labels)||m(t.labels)||!p(t.labels)){if(p(t.options)&&!l(t.optionLabel)&&!m(t.optionLabel))for(a.labels=[],n=0;n<t.options.length;n++)if(d(t.optionLabel))a.labels.push(t.options[n][t.optionLabel]);else if(p(t.optionLabel)){let e=[];for(o=0;o<t.optionLabel.length;o++)e.push(t.options[n][t.optionLabel[o]]);a.labels.push(e.join(r))}}else a.labels=t.labels;if(l(t.colors)||m(t.colors)||!p(t.colors)){if(p(t.options)&&!l(t.optionColor)&&!m(t.optionColor)&&d(t.optionColor))for(a.colors=[],n=0;n<t.options.length;n++)a.colors.push(t.options[n][t.optionColor])}else a.colors=t.colors;return l(t.locales)||m(t.locales)||!p(t.locales)||(a.chart.locales=t.locales),l(t.type)||m(t.type)||!d(t.type)||(a.chart.type=t.type),l(t.animations)||m(t.animations)||!v(t.animations)||(a.chart.animations=t.animations),l(t.background)||m(t.background)||!d(t.background)||(a.chart.background=t.background),l(t.brush)||m(t.brush)||!v(t.brush)||(a.chart.brush=t.brush),l(t.defaultLocale)||m(t.defaultLocale)||!d(t.defaultLocale)||(a.chart.defaultLocale=t.defaultLocale),l(t.dropShadow)||m(t.dropShadow)||!v(t.defaultLocale)||(a.chart.dropShadow=t.dropShadow),l(t.fontFamily)||m(t.fontFamily)||!d(t.fontFamily)||(a.chart.fontFamily=t.fontFamily),l(t.foreColor)||m(t.foreColor)||!d(t.foreColor)||(a.chart.foreColor=t.foreColor),l(t.group)||m(t.group)||!d(t.group)||(a.chart.group=t.group),l(t.events)||m(t.events)||!v(t.events)||(a.chart.events=t.events),l(t.height)||m(t.height)||!d(t.height)&&!k(t.height)||(a.chart.height=t.height),l(t.id)||m(t.id)||!d(t.id)||(a.chart.id=S(t.id)),l(t.name)||m(t.name)||!d(t.name)||(a.chart.id=S(t.name)),l(t.offsetX)||m(t.offsetX)||!k(t.offsetX)||(a.chart.offsetX=t.offsetX),l(t.offsetY)||m(t.offsetY)||!k(t.offsetY)||(a.chart.offsetY=t.offsetY),l(t.parentHeightOffset)||m(t.parentHeightOffset)||!k(t.parentHeightOffset)||(a.chart.parentHeightOffset=t.parentHeightOffset),l(t.redrawOnParentResize)||m(t.redrawOnParentResize)||!f(t.redrawOnParentResize)||(a.chart.redrawOnParentResize=t.redrawOnParentResize),l(t.redrawOnWindowResize)||m(t.redrawOnWindowResize)||!f(t.redrawOnWindowResize)||(a.chart.redrawOnWindowResize=t.redrawOnWindowResize),l(t.selection)||m(t.selection)||!v(t.selection)||(a.chart.selection=t.selection),l(t.sparkline)||m(t.sparkline)||!f(t.sparkline)||(a.chart.sparkline=t.sparkline),l(t.stacked)||m(t.stacked)||!f(t.stacked)||(a.chart.stacked=t.stacked),l(t.stackType)||m(t.stackType)||!d(t.stackType)||(a.chart.stackType=t.stackType),l(t.toolbar)||m(t.toolbar)||!v(t.toolbar)||(a.chart.toolbar=t.toolbar),l(t.width)||m(t.width)||!d(t.width)&&!k(t.width)||(a.chart.width=t.width),l(t.zoom)||m(t.zoom)||!v(t.zoom)||(a.chart.zoom=t.zoom),l(t.fill)||m(t.fill)||!v(t.fill)||(a.fill=t.fill),l(t.forecastDataPoints)||m(t.forecastDataPoints)||!v(t.forecastDataPoints)||(a.forecastDataPoints=t.forecastDataPoints),l(t.grid)||m(t.grid)||!v(t.grid)||(a.grid=t.grid),l(t.legend)||m(t.legend)||!v(t.legend)||(a.legend=t.legend),l(t.markers)||m(t.markers)||!v(t.markers)||(a.markers=t.markers),l(t.noData)||m(t.noData)||!v(t.noData)||(a.noData=t.noData),l(t.states)||m(t.states)||!v(t.states)||(a.states=t.states),l(t.stroke)||m(t.stroke)||!v(t.stroke)||(a.stroke=t.stroke),l(t.subtitle)||m(t.subtitle)||!v(t.subtitle)||(a.subtitle=t.subtitle),l(t.theme)||m(t.theme)||!v(t.theme)||(a.theme=t.theme),l(t.title)||m(t.title)||!v(t.title)||(a.title=t.title),l(t.tooltip)||m(t.tooltip)||!v(t.tooltip)||(a.tooltip=t.tooltip),l(t.xaxis)||m(t.xaxis)||!v(t.xaxis)||(a.xaxis=t.xaxis),l(t.yaxis)||m(t.yaxis)||!v(t.yaxis)||(a.yaxis=t.yaxis),l(t.plotOptions)||m(t.plotOptions)||!v(t.plotOptions)||(a.plotOptions={[a.chart.type]:t.plotOptions}),e.createElement(Ve,{options:a,series:s,type:a.chart.type})}function yt(t){return e.createElement(ut,Object.assign({},t,{type:"line"}))}function gt(t){return e.createElement(ut,Object.assign({},t,{type:"bar"}))}function ft(t){return e.createElement(ut,Object.assign({},t,{type:"area"}))}function _t(t){return e.createElement(ut,Object.assign({},t,{type:"candlestick"}))}function Et(t){return e.createElement(ut,Object.assign({},t,{type:"heatmap"}))}function Yt(t){return e.createElement(ut,Object.assign({},t,{type:"treemap"}))}function bt(t){return e.createElement(ut,Object.assign({},t,{type:"pie"}))}function vt(t){return e.createElement(ut,Object.assign({},t,{type:"donut"}))}function kt(t){return e.createElement(ut,Object.assign({},t,{type:"radar"}))}function Dt(t){return e.createElement(ut,Object.assign({},t,{type:"rangeBar"}))}function Tt(t){return e.createElement(ut,Object.assign({},t,{type:"bubble"}))}function Rt(t){return e.createElement(ut,Object.assign({},t,{type:"polarArea"}))}function St(t){return e.createElement(ut,Object.assign({},t,{type:"radialBar"}))}function Ct(t){return e.createElement(ut,Object.assign({},t,{type:"scatter"}))}function Mt(t){return e.createElement(ut,Object.assign({},t,{type:"boxPlot"}))}function xt(t){return e.createElement(ut,Object.assign({},t,{type:"histogram"}))}export{ft as ChartArea,gt as ChartBar,Mt as ChartBoxPlot,Tt as ChartBubble,_t as ChartCandleStick,vt as ChartDonut,Et as ChartHeatMap,xt as ChartHistogram,yt as ChartLine,bt as ChartPie,Rt as ChartPolarArea,kt as ChartRadar,St as ChartRadial,Dt as ChartRange,Ct as ChartScatter,Yt as ChartTreeMap,Je as DataTable,Xe as DataTableContainer,Qe as Field,Oe as InputChoose,ct as InputColor,Ue as InputDate,et as InputDateTime,Fe as InputFile,je as InputNumber,nt as InputSelect,ht as InputSelectFetch,st as InputTag,He as InputText,at as InputTime,lt as InputWorkflow,rt as InputYear,Ne as Loading,We as LoadingOverlay,dt as LoadingPage};
//# sourceMappingURL=index.modern.js.map
