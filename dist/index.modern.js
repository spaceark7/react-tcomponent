import e,{useState as t,useEffect as n,useRef as a}from"react";import"react-phone-number-input/style.css";import"bootstrap/dist/css/bootstrap.min.css";import"dropzone/dist/min/dropzone.min.css";import"video-react/dist/video-react.css";import"rc-time-picker/assets/index.css";import"react-datepicker/dist/react-datepicker.css";import"react-input-range/lib/css/index.css";import r from"cleave.js/react";import{isEqual as s,isEmpty as o,isUndefined as i,filter as l,isArray as p,isString as u,isNull as c,find as d,includes as m,debounce as h,uniqBy as f,findIndex as y,isBoolean as g,uniq as v,map as E,isObject as b,isPlainObject as k,isNumber as D}from"lodash";import{connect as Y,useSelector as T,useDispatch as R}from"react-redux";import M from"react-phone-number-input";import S from"jodit-react";import C from"mousetrap";import{findArrayName as I,slug as P,secureData as w,setAuthHeader as x,numberFormat as H,useDebounce as V,fetchErrorDispatch as N,defaultFilterData as L}from"tcomponent";import A from"html-react-parser";import{Modal as O,Form as F,ButtonGroup as z,Button as U,InputGroup as B,Table as j,Row as G,Col as W,Tooltip as K,DropdownButton as q,Dropdown as X,Card as J}from"react-bootstrap";import"@wiris/mathtype-generic";import Q from"react-contenteditable";import Z from"axios";import $ from"react-dropzone-component";import{Player as ee}from"video-react";import*as te from"moment";import ne from"moment";import{FontAwesomeIcon as ae}from"@fortawesome/react-fontawesome";import{faSearch as re,faDownload as se,faTimes as oe,faAngleDoubleLeft as ie,faAngleLeft as le,faBars as pe,faAngleRight as ue,faAngleDoubleRight as ce,faSync as de}from"@fortawesome/free-solid-svg-icons";import me from"react-spinners/PuffLoader";import he from"react-datepicker";import{faCalendar as fe,faFile as ye,faArrowAltCircleDown as ge,faArrowAltCircleUp as ve,faClock as _e}from"@fortawesome/free-regular-svg-icons";import Ee from"react-input-range";import be from"react-loading-overlay";import ke from"styled-components";import{useIsVisible as De}from"react-is-visible";import{useTable as Ye,useFilters as Te,useSortBy as Re,useExpanded as Me,usePagination as Se}from"react-table";import Ce from"rc-time-picker";import Ie from"react-tag-autocomplete";import Pe from"react-select";import{css as we}from"@emotion/react";import{SketchPicker as xe}from"react-color";import He from"react-apexcharts";function Ve(){return(Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ne(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){return t||(t=e.slice(0)),e.raw=t,e}var Oe=function(t){function n(n){var a;return(a=t.call(this,n)||this).handleEquationChange=function(e){var t=a.props.onEquationInput,n=window.WirisPlugin.Parser.endParse(e.target.value);t(e.target.value,n)},a.equationEditorRef=e.createRef(),a.toolbarRef=e.createRef(),a}Ne(n,t);var a=n.prototype;return a.componentDidMount=function(){try{var e={};e.target=this.equationEditorRef.current,e.toolbar=this.toolbarRef.current;var t=new window.WirisPlugin.GenericIntegration(e);t.init(),t.listeners.fire("onTargetReady",{})}catch(e){}},a.render=function(){var t=(this.props||{}).value;return e.createElement("div",null,e.createElement("div",{ref:this.toolbarRef}),e.createElement(Q,{suppressContentEditableWarning:!0,className:"form-control",innerRef:this.equationEditorRef,onChange:this.handleEquationChange,html:t||""}))},n}(e.Component),Fe=function(t){function n(n){var a;(a=t.call(this,n)||this).handleInputChange=function(e){e.preventDefault();var t=e.target.value?String(e.target.value):"";"nik"!=a.state.type&&"kip"!=a.state.type&&"npwp"!=a.state.type&&"postcode"!=a.state.type||(t=t.replace(/\D/g,"")),a.props.maxlength&&(t=t.substring(0,a.props.maxlength)),a.setState({value:t}),a.props.setInput(a.state.props_name,t)},a.openModal=function(){a.setState({open:!0})},a.closeModal=function(){a.setState({open:!1})},a.onChange=function(e){a.setState({value:e}),a.props.setInput(a.state.props_name,e)};var r=a.props.placeholder||"Isi disini",s={},o=a.props.type?String(a.props.type):"";return"nik"==o.toLowerCase()?(s={delimiter:" ",blocks:[2,2,2,6,4],numericOnly:!0},r=a.props.placeholder||"Nomor Induk Kependudukan"):"kip"==o.toLowerCase()?(s={delimiter:" ",blocks:[4,4,4,4]},r=a.props.placeholder||"Kartu Indonesia Pintar"):"npwp"==o.toLowerCase()?(s={delimiters:[".",".",".","-","."],blocks:[2,3,3,1,3,3],numericOnly:!0},r=a.props.placeholder||"Nomor Pokok Wajib Pajak"):"postcode"==o.toLowerCase()?(s={blocks:[5],delimiter:" ",numericOnly:!0},r=a.props.placeholder||"Kode Pos"):"phone"==o.toLowerCase()&&(r=a.props.placeholder||"Telepon"),a.state={type:o,open:!1,placeholder:r,options_cleave:s,value:a.props.value?String(a.props.value):"",props_name:a.props.name?P(String(a.props.name),"_"):"",config:{readonly:!1,placeholder:" ",toolbarButtonSize:"small"}},a.toolbarRef=e.createRef(),a.editorRef=e.createRef(),a}Ne(n,t);var a=n.prototype;return a.componentDidUpdate=function(e,t){s(this.props.type,e.type)||this.setState({type:this.props.type});try{s(I(this.state.props_name,this.props.input),I(this.state.props_name,e.input))||s(this.state.value,I(this.state.props_name,this.props.input))||this.setState({value:this.props.input[this.state.props_name]||""})}catch(e){}this.props.value&&e.value!=this.props.value&&this.setState({value:this.props.value||""})},a.componentDidMount=function(){if(this.props.disableCopy||this.props.disablePaste||this.props.disableSelectAll){var e=[];this.props.disableCopy&&(e.push("command+c"),e.push("ctrl+c")),this.props.disablePaste&&(e.push("command+v"),e.push("ctrl+v")),this.props.disableSelectAll&&(e.push("command+a"),e.push("ctrl+a")),e.length>0&&C.bind(e,function(){return!1})}var t="";try{var n=I(this.state.props_name,this.props.input);t=this.props.value?this.props.value:n}catch(e){}this.setState({value:t})},a.render=function(){if(!this.state.props_name)return"Name is Required";if(this.props.disabled||this.props.isReadonly)return!o(this.state.value)&&A(String(this.state.value));if("nik"==this.state.type||"kip"==this.state.type||"npwp"==this.state.type||"postcode"==this.state.type)return e.createElement(r,{placeholder:this.state.placeholder,id:this.props.id,name:this.state.props_name,value:this.state.value,onChange:this.handleInputChange,options:this.state.options_cleave,className:"form-control"});if("textarea"==this.state.type)return e.createElement("textarea",{id:this.props.id,rows:this.props.rows||3,className:"form-control no-resize mousetrap",onChange:this.handleInputChange,name:this.state.props_name,value:this.state.value,placeholder:this.props.placeholder});if("phone"==this.state.type)return e.createElement(M,{international:!0,defaultCountry:"ID",value:this.state.value?String(this.state.value):"",onChange:this.onChange});if("texteditor"==this.state.type)return e.createElement(e.Fragment,null,e.createElement("div",{className:"form-control",style:{minHeight:32},onClick:this.openModal},o(this.state.value)?"":A(String(this.state.value))),e.createElement(O,{size:"lg",show:this.state.open,onHide:this.closeModal},e.createElement(O.Header,{onHide:this.closeModal,closeButton:!0},e.createElement(O.Title,null,this.state.placeholder||"Isi disini")),e.createElement(O.Body,null,e.createElement(S,{key:this.props.name+"_editor",id:this.props.id,ref:this.editorRef,value:o(this.state.value)?"":String(this.state.value),config:this.state.config,tabIndex:1,onChange:this.onChange}))));if("equation"==this.state.type)return e.createElement(e.Fragment,null,e.createElement("div",{className:"form-control",style:{minHeight:32},onClick:this.openModal},o(this.state.value)?"":A(String(this.state.value))),e.createElement(O,{size:"lg",show:this.state.open,onHide:this.closeModal},e.createElement(O.Header,{onHide:this.closeModal,closeButton:!0},e.createElement(O.Title,null,this.state.placeholder||"Isi")),e.createElement(O.Body,null,e.createElement("div",{id:this.props.id,ref:this.toolbarRef},e.createElement(Oe,{id:this.props.id,onEquationInput:this.onChange,toolbarRef:this.toolbarRef,value:this.state.value})))));var t="text"===this.state.type||i(this.state.type)?"search":this.state.type;return e.createElement(F.Control,{id:this.props.id,type:t,placeholder:this.state.placeholder,value:this.state.value,onChange:this.handleInputChange,name:this.state.props_name,className:"form-control mousetrap"})},n}(e.Component),ze=Y(function(e){return{input:e.core.input||{}}},function(e){return{setInput:function(t,n){return e({type:"SET_INPUT",payload:{key:P(String(t),"_"),value:n}})}}})(Fe);function Ue(){return e.createElement(me,{color:"#000",size:25})}var Be=te;function je(t){try{if(s(t.type.type.substring(0,5),"image"))return e.createElement("img",{key:t.file,className:"img-responsive",style:{maxWidth:"100%"},src:process.env.REACT_APP_API_URL+"/file/stream/"+t.file});if(s(t.type.type.substring(0,5),"video"))return e.createElement(ee,{key:t.file,autoPlay:!1,src:process.env.REACT_APP_API_URL+"/file/stream/"+t.file});if(s(t.type.type,"application/pdf"))return e.createElement("iframe",{key:t.file,width:"100%",height:"480",src:process.env.REACT_APP_API_URL+"/file/stream/"+t.file})}catch(e){}return null}function Ge(a){var r=a.accept?a.accept:"image/*, video/*, audio/*, .docx, .xlsx, .pptx, .csv, .pdf",i=T(function(e){return e.core.input}),c=T(function(e){return e.core.parameter}),d=t({}),m=d[0],h=d[1],f=t([]),y=f[0],g=f[1],v=t(!1),_=v[0],E=v[1],b=T(function(e){return e.auth}),k=R();function D(e){if(u(e)&&!o(e)&&"null"!=e&&o(m[e])){var t=process.env.REACT_APP_API_URL+"/file/info",n=w({token_file:e}),a={method:"POST",headers:x(b),url:t,data:n};E(!0),Z(a).then(function(t){t.data.success&&(m[e]=t.data.data,h(m),V[e]=!1,N(V)),E(!1)}).catch(function(t){m[e]="",h(m),V[e]=!1,N(V)})}}function Y(e){return u(e)&&!o(e)&&"null"!=e}function M(e){return l(e,Y)||[]}function S(e){return M(String(e).split("|"))}function C(e){var t;N(Ve({},V,((t={})[e]=!V[e],t)))}function P(e){e!=c.openFile&&k({type:"SET_PARAMETER",payload:{key:"openFile",value:e}})}n(function(){var e=a.value?a.value:I(a.name,i);if(e){var t=S(e);g(t)}},[]),n(function(){var e=S(I(a.name,i));s(e,y)||g(e)},[I(a.name,i)]),n(function(){!function(e){try{if(p(e)&&e.length>0)for(var t=0;t<e.length;t++)Y(e[t])&&D(e[t]);else Y(e)&&D(e)}catch(e){}}(y)},[y]),n(function(){P(_)},[_]);var H=t({}),V=H[0],N=H[1],L=M(y);return process.env.REACT_APP_API_URL?e.createElement("div",null,!_&&!a.isReadonly&&e.createElement("div",null,!a.isMultiple&&e.createElement("div",{style:{display:"inline-block"}},e.createElement(F.Control,{className:a.className,accept:r,label:a.name,type:"file",onChange:function(e){var t,n,r=e.target.files||e.dataTransfer.files;r.length&&(t=r[0],(n=new FileReader).onload=function(e){!function(e,t){var n=a.url||process.env.REACT_APP_API_URL+"/file/upload",r=new FormData,s=e.name;r.append("type",e.type),r.append("name",s),r.append("file",e),r.append("lastModifiedDate",Be(e.lastModifiedDate).format("YYYY-MM-DD HH:mm:ss")),r.append("size",e.size),E(!0),Z.post(n,r,{headers:x(b,"multipart/form-data; boundary="+r._boundary)}).then(function(e){o(e.data.message)||k({type:"SET_MESSAGE",payload:e.data.message}),e.data.success?(k({type:"SET_INPUT",payload:{key:a.name,value:e.data.data.token}}),g([e.data.data.token])):k({type:"SET_INPUT",payload:{key:a.name,value:""}}),E(!1)}).catch(function(e){k({type:"SET_INPUT",payload:{key:a.name,value:""}}),k({type:"SET_MESSAGE",payload:"Gagal mengunggah lampiran"}),E(!1)})}(t)},n.readAsDataURL(t))},onInput:function(e){P(!1)},onClick:function(e){P(!0),setTimeout(function(){P(!1)},6e4)}})),!_&&a.isMultiple&&e.createElement($,{config:{showFiletypeIcon:!0,postUrl:process.env.REACT_APP_API_URL+"/file/upload_multiple",uploadMultiple:!0,maxFiles:5},eventHandlers:{drop:function(){},complete:function(e){var t=JSON.parse(e.xhr.response),n=y||[];n.push(t.data.token);var r=l(n,function(e){return!o(e)})||[];k({type:"SET_INPUT",payload:{key:a.name,value:r.join("|")}}),g(r)},removedfile:function(e){}},djsConfig:{acceptedFiles:r,params:{token:b.user.token},addRemoveLinks:!0,autoProcessQueue:!0,maxFiles:5}})),!_&&L.length>0&&L.map(function(t,n){return e.createElement("div",{style:{display:"inline-block"},key:t},a.preview&&e.createElement(e.Fragment,null,e.createElement(je,{key:t,type:m[t],file:t}),e.createElement("br",null)),e.createElement(z,null,e.createElement(U,{variant:"primary",size:"sm",onClick:function(){return C(t)}},e.createElement(ae,{icon:re})," Lihat"),e.createElement(U,{vendor:"success",onClick:function(){return window.location.href=process.env.REACT_APP_API_URL+"/file/download/"+t},size:"sm"},e.createElement(ae,{icon:se})," Unduh"),!a.isReadonly&&e.createElement(U,{variant:"danger",onClick:function(){return function(e){var t=process.env.REACT_APP_API_URL+"/file/delete",n=w({token_file:e,token:b.token}),r={method:"POST",headers:x(b),url:t,data:n};E(!0),Z(r).then(function(t){o(t.data.message)||k({type:"SET_MESSAGE",payload:t.data.message});var n=l(y,function(t){return!s(t,e)});g(n),k({type:"SET_INPUT",payload:{key:a.name,value:n}}),E(!1)}).catch(function(t){k({type:"SET_MESSAGE",payload:"Gagal menghapus lampiran"});var n=l(y,function(t){return!s(t,e)});k({type:"SET_INPUT",payload:{key:a.name,value:n}}),g(n),E(!1)})}(t)},size:"sm"},e.createElement(ae,{icon:oe})," Hapus")),e.createElement(O,{size:"lg",id:"modal_"+t,show:V[t],onHide:function(){return C(t)}},e.createElement(O.Header,{closeButton:!0,onHide:function(){return C(t)}},e.createElement(O.Title,null,"Lampiran ",t)),e.createElement(O.Body,null,e.createElement(je,{key:t,type:m[t],file:t}))))}),_&&e.createElement(Ue,null)):e.createElement("span",null,"REACT_APP_API_URL is required for .env")}var We,Ke=function(t){function n(e){var n;return(n=t.call(this,e)||this).labelGenerate=function(e){var t=[];if(p(n.props.optionLabel))for(var a=0;a<=n.props.optionLabel.length-1;a++)t.push(e[n.props.optionLabel[a]]);else t.push(e[n.props.optionLabel]);return t},n.onChange=function(e){if(!n.props.isReadonly&&n.props.name)try{if(n.props.isMultiple){for(var t=n.state.defaultValue||[],a=!1,r=[],s=0;s<t.length;s++){var o=t[s];o==e[n.props.optionValue]?a=!0:r.push(o)}a||r.push(e[n.props.optionValue]),n.props.setInput(n.props.name,r)}else{var i=I(n.props.name,n.props.input)||null;n.props.value&&(i=n.props.value);var l=null;i!=e[n.props.optionValue]&&(l=e[n.props.optionValue]),n.props.setInput(n.props.name,l)}}catch(e){n.props.setInput(n.props.name,null)}n.onRefresh()},n.state={defaultValue:null,type:n.props.type||"inline"},n.onRefresh=h(n.onRefresh.bind(Le(n)),200),n}Ne(n,t);var a=n.prototype;return a.onRefresh=function(){var e,t=null;if(e=this.props.value?this.props.value:I(this.props.name,this.props.input)||null,!c(e))if(this.props.isMultiple){t=[];for(var n=0;n<this.props.options.length;n++)for(var a=0;a<e.length;a++){var r=this.props.options[n],s=e[a];String(r[this.props.optionValue])==String(s)&&t.push(r[this.props.optionValue])}}else t=d(this.props.options,function(t){return String(t[this.props.optionValue])==String(e)}.bind(this));t=i(t)||c(t)?null:t,this.setState({defaultValue:t})},a.componentDidUpdate=function(e,t){s(I(this.props.name,e.input),I(this.props.name,this.props.input))||s(this.state.defaultValue,I(this.props.name,this.props.input))||this.onRefresh()},a.componentDidMount=function(){this.onRefresh()},a.render=function(){var t=this,n=[];try{n=this.props.options.length>0?this.props.options:[]}catch(e){}return e.createElement("div",{className:"custom-controls-stacked"},n.map(function(n){var a=!1;try{a=t.props.isMultiple?m(t.state.defaultValue,n[t.props.optionValue]):s(n[t.props.optionValue],t.state.defaultValue[t.props.optionValue])}catch(e){}return e.createElement(e.Fragment,null,e.createElement(F.Check,{inline:"inline"==t.state.type,disabled:t.props.disabled||t.props.isReadonly,type:t.props.isMultiple?"checkbox":"radio",name:t.props.name,onChange:t.onChange.bind(t,n),value:n,checked:a,label:t.labelGenerate(n).map(function(n,a){return s(String(n).substring(0,3),"AT-")?e.createElement(Ge,{value:n,isReadonly:!0,preview:!0}):t.props.isHtml?A(String(n)):n})}))}))},n}(e.Component),qe=Y(function(e){return{input:e.core.input||{}}},function(e){return{setInput:function(t,n){return e({type:"SET_INPUT",payload:{key:P(String(t)),value:n}})}}})(Ke),Xe=function(t){return e.createElement(B,{size:"sm"},e.createElement(B.Text,{style:{background:"none"}},e.createElement(ae,{size:"sm",icon:fe})),e.createElement(F.Control,{style:{borderLeft:"none",fontFamily:"inherit",fontSize:"inherit"},type:"text",className:"form-control",disabled:t.disabled,name:t.name,value:t.value||"",onClick:t.onClick}))},Je=function(t){function n(e){var n;return(n=t.call(this,e)||this).handleInputChange=function(e){e=ne(e,"YYYY-MM-DD").isValid()?ne(e,"YYYY-MM-DD").format("YYYY-MM-DD"):null,n.props.setInput(n.props.name,e),n.onRefresh()},n.handleInputChangeStart=function(e){e=ne(e,"YYYY-MM-DD").isValid()?ne(e,"YYYY-MM-DD").format("YYYY-MM-DD"):null,n.props.setInput("start_"+n.props.name,e),n.onRefresh()},n.handleInputChangeEnd=function(e){e=ne(e,"YYYY-MM-DD").isValid()?ne(e,"YYYY-MM-DD").format("YYYY-MM-DD"):null,n.props.setInput("end_"+n.props.name,e),n.onRefresh()},n.checkTglMerah=function(e){var t=ne(e).format("d");return 0==t||6==t?"tglmerah":void 0},n.state={selected:null,start_selected:null,end_selected:null},n.onRefresh=h(n.onRefresh.bind(Le(n)),200),n}Ne(n,t);var a=n.prototype;return a.onRefresh=function(){if(this.props.isRange){var e=null,t=null;try{e=ne(this.props.start_selected,"YYYY-MM-DD").isValid()?ne(this.props.start_selected,"YYYY-MM-DD").toDate():ne(I("start_"+this.props.name,this.props.input),"YYYY-MM-DD").isValid()?ne(I("start_"+this.props.name,this.props.input),"YYYY-MM-DD").toDate():null}catch(e){}try{t=ne(this.props.end_selected,"YYYY-MM-DD").isValid()?ne(this.props.end_selected,"YYYY-MM-DD").toDate():ne(I("end_"+this.props.name,this.props.input),"YYYY-MM-DD").isValid()?ne(I("end_"+this.props.name,this.props.input),"YYYY-MM-DD").toDate():null}catch(e){}this.setState({start_selected:e,end_selected:t})}else{var n=null;try{n=ne(this.props.selected,"YYYY-MM-DD").isValid()?ne(this.props.selected,"YYYY-MM-DD").toDate():ne(I(this.props.name,this.props.input),"YYYY-MM-DD").isValid()?ne(I(this.props.name,this.props.input),"YYYY-MM-DD").toDate():null}catch(e){}this.setState({selected:n})}},a.componentDidMount=function(){this.onRefresh()},a.componentDidUpdate=function(e,t){this.props.isRange||I(this.props.name,e.input)==I(this.props.name,this.props.input)||I(this.props.name,this.props.input)==this.state.selected||this.onRefresh(),this.props.isRange&&I("start_"+this.props.name,e.input)!=I("start_"+this.props.name,this.props.input)&&I("start_"+this.props.name,this.props.input)!=this.state.start_selected&&this.onRefresh(),this.props.isRange&&I("end_"+this.props.name,e.input)!=I("end_"+this.props.name,this.props.input)&&I("end_"+this.props.name,this.props.input)!=this.state.end_selected&&this.onRefresh()},a.render=function(){var t=this.props.dateFormat?this.props.dateFormat:this.props.yearOnly?"yyyy":"yyyy-MM-dd";return this.props.isRange?this.props.disabled||this.props.isReadonly?(ne(this.state.start_selected,"YYYY-MM-DD").isValid()?ne(this.state.start_selected,"YYYY-MM-DD").format("DD-MM-YYYY"):"")+" - "+(ne(this.state.end_selected,"YYYY-MM-DD").isValid()?ne(this.state.end_selected,"YYYY-MM-DD").format("DD-MM-YYYY"):""):e.createElement("div",{className:"input-daterange input-group"},e.createElement(he,{minDate:ne(this.props.minDate,"YYYY-MM-DD").isValid()?ne(this.props.minDate,"YYYY-MM-DD").toDate():null,maxDate:ne(this.props.maxDate,"YYYY-MM-DD").isValid()?ne(this.props.maxDate,"YYYY-MM-DD").toDate():null,dateFormat:t,placeholder:this.props.placeholder?this.props.placeholder:"Tanggal",selected:this.state.start_selected,isClearable:!this.props.disabled&&!this.props.isReadonly,customInput:e.createElement(Xe,{value:this.state.start_selected,name:"start_"+this.props.name}),onChange:this.handleInputChangeStart,selectsStart:!this.props.yearOnly,peekNextMonth:!this.props.yearOnly,withPortal:!0,showMonthDropdown:!this.props.yearOnly,showYearDropdown:!this.props.yearOnly,showYearPicker:this.props.yearOnly,name:"start_"+this.props.name,todayButton:this.props.yearOnly?null:"Hari ini",dayClassName:this.checkTglMerah,dropdownMode:"select",disabled:this.props.disabled||this.props.isReadonly,readOnly:this.props.disabled||this.props.isReadonly,startDate:this.state.start_selected,endDate:this.state.end_selected,shouldCloseOnSelect:!1}),e.createElement("span",{className:"input-group-addon",style:{background:"none"}},"  -  "),e.createElement(he,{minDate:ne(this.state.start_selected,"YYYY-MM-DD").isValid()?ne(this.state.start_selected,"YYYY-MM-DD").toDate():ne(this.props.minDate,"YYYY-MM-DD").isValid()?ne(this.props.minDate,"YYYY-MM-DD").toDate():null,maxDate:ne(this.props.maxDate,"YYYY-MM-DD").isValid()?ne(this.props.maxDate,"YYYY-MM-DD").toDate():null,dateFormat:t,placeholder:this.props.placeholder?this.props.placeholder:"Tanggal",selected:this.state.end_selected,isClearable:!this.props.disabled&&!this.props.isReadonly,name:"end_"+this.props.name,selectsEnd:!0,customInput:e.createElement(Xe,{value:this.state.end_selected,name:"end_"+this.props.name}),onChange:this.handleInputChangeEnd,selectsStart:!this.props.yearOnly,peekNextMonth:!this.props.yearOnly,withPortal:!0,showMonthDropdown:!this.props.yearOnly,showYearDropdown:!this.props.yearOnly,showYearPicker:this.props.yearOnly,dayClassName:this.checkTglMerah,todayButton:this.props.yearOnly?null:"Hari ini",dropdownMode:"select",startDate:this.state.start_selected,endDate:this.state.end_selected,disabled:this.props.disabled||this.props.isReadonly,readOnly:this.props.disabled||this.props.isReadonly,shouldCloseOnSelect:!1})):this.props.disabled||this.props.isReadonly?ne(this.props.input[this.props.name],"YYYY-MM-DD").isValid()?ne(this.props.input[this.props.name],"YYYY-MM-DD").format(this.props.yearOnly?"YYYY":"DD-MM-YYYY"):"":e.createElement(he,{minDate:ne(this.props.minDate,"YYYY-MM-DD").isValid()?ne(this.props.minDate,"YYYY-MM-DD").toDate():null,maxDate:ne(this.props.maxDate,"YYYY-MM-DD").isValid()?ne(this.props.maxDate,"YYYY-MM-DD").toDate():null,dateFormat:t,placeholder:this.props.placeholder?this.props.placeholder:"Tanggal",customInput:e.createElement(Xe,{value:this.state.selected,name:this.props.name}),selected:this.state.selected,isClearable:!this.props.disabled&&!this.props.isReadonly,id:this.props.name,className:"form-control",dayClassName:this.checkTglMerah,onChange:this.handleInputChange,selectsStart:!this.props.yearOnly,peekNextMonth:!this.props.yearOnly,withPortal:!0,showMonthDropdown:!this.props.yearOnly,showYearDropdown:!this.props.yearOnly,showYearPicker:this.props.yearOnly,todayButton:this.props.yearOnly?null:"Hari ini",dropdownMode:"select",disabled:this.props.disabled||this.props.isReadonly,readOnly:this.props.disabled||this.props.isReadonly,shouldCloseOnSelect:!1})},n}(e.Component),Qe=Y(function(e){return{input:e.core.input||{}}},function(e){return{setInput:function(t,n){return e({type:"SET_INPUT",payload:{key:P(String(t),"_"),value:n}})}}})(Je),Ze=function(t){function n(e){var n;return(n=t.call(this,e)||this).handleInputChange=function(e){var t=null;t="decimal"==n.props.type?Number(e.target.value.replace(/[^0-9.-]+/g,"")):"percent"==n.props.type?n.validate_min_max(e.target.value.replace(/[^0-9.-]+/g,""),0,100):"range_three"==n.props.type?n.validate_min_max(e.target.value.replace(/[^0-9.-]+/g,""),1,3):"range_hundred"==n.props.type?n.validate_min_max(e.target.value.replace(/[^0-9.-]+/g,""),1,100):"range_depend"==n.props.type?n.validate_min_max(e.target.value.replace(/[^0-9.-]+/g,""),0,100):e.target.value.replace(/[^0-9.-]+/g,"");var a=n.props.minValue?Number(n.props.minValue):null,r=n.props.maxValue?Number(n.props.maxValue):null;r&&a?t=n.validate_min_max(t,a,r):!r&&a?t=n.validate_min_max(t,a,999999999999):r&&!a&&(t=n.validate_min_max(t,0,r)),t=t||0,n.state.props_name&&n.props.setInput(n.state.props_name,t);var s=e.target.rawValue||null;isNaN(parseFloat(s))||isNaN(parseFloat(t))||parseFloat(s)===parseFloat(t)||n.state.event.setRawValue(t)},n.onChange=function(e){n.setState({value:e}),n.state.props_name&&n.props.setInput(n.state.props_name,e)},n.onRefresh=function(){var e="";try{var t=I(n.state.props_name,n.props.input);e=n.props.value?n.props.value:t}catch(e){}var a=n.props.minValue?Number(n.props.minValue):null,r=n.props.maxValue?Number(n.props.maxValue):null,s=e?parseInt(e):a;("decimal"==n.props.type||"percent"==n.props.type||"range_three"==n.props.type||r||a)&&(s=e?parseFloat(e):a),isNaN(s)&&(s=a),n.setState({value:s});try{parseFloat(n.state.event.lastInputValue||null)!==parseFloat(s)&&n.state.event.setRawValue(s)}catch(e){}},n.checkType=function(){var e={numeral:!0,numeralPositiveOnly:!0};"decimal"==n.props.type||"percent"==n.props.type||"range_three"==n.props.type||(e.numeralThousandsGroupStyle="thousand"),n.setState({options:e,rawValue:I(n.state.props_name,n.props.input),value:I(n.state.props_name,n.props.input)}),n.onRefresh()},n.state={defaultValue:null,options:{numeral:!0},event:null,value:null,props_name:P(n.props.name,"_")},n.onRefresh=h(n.onRefresh.bind(Le(n)),200),n}Ne(n,t);var a=n.prototype;return a.validate_min_max=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=100),this.props.enableNegative&&e<0&&(t=-n),isNaN(e)&&(e=t),(e=parseFloat(e))>=n?e=n:e<=t&&(e=t),e?Number(e):null},a.componentDidUpdate=function(e,t,n){if(s(this.props.type,e.type)||this.checkType(),s(I(this.state.props_name,e.input),I(this.state.props_name,this.props.input))||s(this.state.value,I(this.state.props_name,this.props.input))||(this.setState({rawValue:I(this.state.props_name,this.props.input)||null,value:I(this.state.props_name,this.props.input)||null}),this.onRefresh()),this.props.value&&e.value!=this.props.value&&this.props.value!=this.state.value){var a=this.props.value||null;this.setState({rawValue:a,value:a}),this.onRefresh()}},a.componentDidMount=function(){this.checkType()},a.onInit=function(e){this.setState({event:e})},a.render=function(){return this.props.disabled||this.props.isReadonly?c(this.state.value)||i(this.state.value)?null:H(this.state.value,""):"range"==this.props.type?e.createElement(Ee,{maxValue:this.props.maxValue,minValue:this.props.minValue,value:this.state.value,onChange:this.onChange}):e.createElement(r,{placeholder:this.props.placeholder?this.props.placeholder:"",id:this.state.props_name,name:this.state.props_name,onInit:this.onInit.bind(this),value:this.state.value,onChange:this.handleInputChange,options:this.state.options,className:"form-control"})},n}(e.Component),$e=Y(function(e){return{input:e.core.input||{}}},function(e){return{setInput:function(t,n){e({type:"SET_INPUT",payload:{key:P(String(t),"_"),value:n}})}}})(Ze),et=ke(be)(We||(We=Ae(["\n  overflow: hidden;\n\n  ._loading_overlay_overlay {\n    background: rgba(255, 255, 255, 0.5);\n  }\n  &._loading_overlay_wrapper--active {\n    overflow: hidden;\n  }\n"])));function tt(t){return e.createElement(et,{fadeSpeed:250,active:t.isLoading,spinner:e.createElement(Ue,null)},t.children)}var nt=function(e){return null},at=function(t){var a=t.column.filterValue,r=t.column.id,s=t.name,o=R(),i=e.useState(a),l=i[0],p=i[1],u=P("search_"+s+"_"+r,"_"),c=T(function(e){return e.core.filter});return n(function(){p(c[u])},[]),e.createElement(F.Control,{key:u,id:u,name:u,value:l,onChange:function(e){var t;e.preventDefault(),p(e.target.value),o({type:"SET_MULTI_FILTER",payload:(t={},t[u]=e.target.value,t[P("loaded_"+s,"_")]=!1,t)})},placeholder:"Pencarian"})};function rt(a){for(var r=a.columns,s=a.data,l=a.renderRowSubComponent,p=a.customPageIndex,u=a.customPageSize,d=a.customPageCount,m=a.loading,h=a.isColumnsSearchable,f=a.primaryKey,y=a.name,g=a.customPageTotal,v=T(function(e){return e.core.filter})||{},_=[],E=0;E<r.length;E++)try{var b=P("sort_"+y+"_"+r[E][f],"_"),k=v[b];o(k)||c(k)||i(k)||_.push({id:r[E][f],desc:"desc"==k})}catch(e){}var D=Ye({columns:r,data:s,defaultColumn:{Filter:function(t){return e.createElement(at,Ve({},t,{name:y}))}},initialState:{pageIndex:p,pageSize:u,sortBy:_},manualPagination:!0,pageCount:d,manualSortBy:!0,defaultCanSort:!0,isMultiSortEvent:function(){}},Te,Re,Me,Se),Y=D.getTableProps,M=D.getTableBodyProps,S=D.headerGroups,C=D.page,I=D.prepareRow,w=D.visibleColumns,x=D.gotoPage,N=D.setPageSize,L=D.state,A=L.pageIndex,O=L.pageSize,z=S[0].headers||[];V(function(){for(var e,t={},n=0;n<z.length;n++){var a=z[n];if(a){var r=P("sort_"+y+"_"+a[f],"_"),s=a.isSorted?a.isSortedDesc?"desc":"asc":null;s!=v[r]&&(t[r]=s)}}o(t)||Q({type:"SET_MULTI_FILTER",payload:Ve({},t,(e={},e[P("loaded_"+y,"_")]=!1,e))})},500,[z]);var G=t(m),W=G[0],K=G[1],q=t(A),X=q[0],J=q[1],Q=R(),Z=function(e){var t;N(Number(e.target.value)),Q({type:"SET_MULTI_FILTER",payload:(t={},t[P("load_"+y,"_")]=Number(e.target.value),t[P("page_"+y,"_")]=X,t)})},$=function(e){var t=e.target.value?Number(e.target.value):0;se(t)},ee=p<d,te=p>=2,ne=function(){se(X+1)},re=function(){se(X-1)},se=function(e){J(e)};return V(function(){var e;x(X),Q({type:"SET_MULTI_FILTER",payload:(e={},e[P("load_"+y,"_")]=O,e[P("page_"+y,"_")]=X,e)})},500,[X]),n(function(){K&&!m?setTimeout(function(){return K(m)},500):K(m)},[m]),o(y)?e.createElement("p",null,"Props name is Required"):e.createElement("div",null,e.createElement("div",{className:"custom-scroll",style:{overflow:"auto"}},e.createElement(B,null,e.createElement(U,{style:{border:"none"},variant:"primary",onClick:function(){return se(1)},disabled:!te||m},e.createElement(ae,{icon:ie})),e.createElement(U,{style:{border:"none"},variant:"primary",onClick:re,disabled:!te||m},e.createElement(ae,{icon:le})),e.createElement(B.Text,{style:{background:"none"}},e.createElement(ae,{icon:ye}),"   Hal :"," "),e.createElement(F.Control,{style:{borderLeft:"none",borderRight:"none",minWidth:72},type:"number",min:1,max:d,value:X,onChange:$}),e.createElement(B.Text,{style:{background:"none"}},e.createElement(ae,{icon:pe}),"   Lihat :"," "),e.createElement(F.Control,{type:"number",min:1,style:{borderLeft:"none",borderRight:"none",minWidth:72},max:50,value:O,onChange:Z}),e.createElement(U,{style:{border:"none"},variant:"primary",onClick:ne,disabled:!ee||m},e.createElement(ae,{icon:ue})),e.createElement(U,{style:{border:"none"},variant:"primary",onClick:function(){return se(d)},disabled:!ee||m},e.createElement(ae,{icon:ce})))),e.createElement("div",{className:"text-center mt-2 mb-2"},e.createElement("strong",null,H(p,""))," dari"," ",e.createElement("strong",null,H(d,""))," hal. Total"," : ",e.createElement("strong",null,H(g,""))," hal"),e.createElement(j,Ve({style:{margin:0,zIndex:0},responsive:!0,bordered:!0,hover:!0,striped:!0,vcenter:!0},Y()),e.createElement("thead",null,S.map(function(t){return e.createElement("tr",t.getHeaderGroupProps(),t.headers.map(function(t){return e.createElement("th",Ve({style:{padding:"4px 8px",borderTop:"1px solid #dee2e6"}},t.getHeaderProps()),e.createElement("div",t.getSortByToggleProps(),e.createElement("span",{style:{display:"inline-block"}},t.render("Header")),e.createElement("span",{style:{display:"inline-block",fontWeight:"bold"}},function(e){return e.isSorted?e.isSortedDesc?" ↓":" ↑":""}(t))),h&&e.createElement(nt,{column:t}))}))})),e.createElement("tbody",M(),C.length>0&&!W&&parseInt(p)===parseInt(X)?C.map(function(t){return I(t),e.createElement(e.Fragment,{key:t.getRowProps().key},e.createElement("tr",null,t.cells.map(function(t,n){return e.createElement("td",Ve({style:{padding:"4px 8px",width:0==n?"10px":"auto"}},t.getCellProps()),t.render("Cell"))})),t.isExpanded&&e.createElement("tr",null,e.createElement("td",{style:{padding:"4px 8px"},colSpan:w.length},l(t))))}):S.map(function(t){return e.createElement("tr",null,e.createElement("td",{style:{padding:"12px 0",textAlign:"center"},colSpan:t.headers.length},W||parseInt(p)!==parseInt(X)?"Memproses":"Tidak ada data"))}))),e.createElement("div",{className:"text-center mt-2 mb-2"},e.createElement("strong",null,H(p,""))," dari"," ",e.createElement("strong",null,H(d,""))," hal. Total"," : ",e.createElement("strong",null,H(g,""))," hal"),e.createElement("div",{className:"custom-scroll",style:{overflow:"auto"}},e.createElement(B,null,e.createElement(U,{style:{border:"none"},variant:"primary",onClick:function(){return se(1)},disabled:!te||m},e.createElement(ae,{icon:ie})),e.createElement(U,{style:{border:"none"},variant:"primary",onClick:re,disabled:!te||m},e.createElement(ae,{icon:le})),e.createElement(B.Text,{style:{background:"none"}},e.createElement(ae,{icon:ye}),"   Hal :"," "),e.createElement(F.Control,{style:{borderLeft:"none",borderRight:"none",minWidth:72},type:"number",min:1,max:d,value:X,onChange:$}),e.createElement(B.Text,{style:{background:"none"}},e.createElement(ae,{icon:pe}),"   Lihat :"," "),e.createElement(F.Control,{type:"number",min:1,style:{borderLeft:"none",borderRight:"none",minWidth:72},max:50,value:O,onChange:Z}),e.createElement(U,{style:{border:"none"},variant:"primary",onClick:ne,disabled:!ee||m},e.createElement(ae,{icon:ue})),e.createElement(U,{style:{border:"none"},variant:"primary",onClick:function(){return se(d)},disabled:!ee||m},e.createElement(ae,{icon:ce})))))}function st(r){var u,c=t(!1),m=c[0],h=c[1],_=t([]),E=_[0],b=_[1],k=t([]),D=k[0],Y=k[1],M=t({}),S=M[0],C=M[1],w=t(!1),x=w[0],H=w[1],N=t(!1),L=N[0],A=N[1],O=R(),z=(T(function(e){return e.core.parameter}),T(function(e){return e.core.input})||{}),j=(T(function(e){return e.auth.user}),T(function(e){return e.core.filter})||{}),J=P("selected_"+r.name,"_"),Q=r.primaryKey?r.primaryKey:"id",Z={Header:"#",id:"select",width:"10px",Cell:function(t){var n=T(function(e){return e.core.input}),a=!1;try{a="single"==r.selectable?I(J,n)==t.row.original[Q]:y(I(J,n),function(e){return e==t.row.original[Q]})>-1}catch(e){}return e.createElement(F.Check,{inline:!0,id:P(r.name+"_check_"+t.row.original[Q],"_"),name:P(r.name+"_check_"+t.row.original[Q],"_"),type:"single"==r.selectable?"radio":"checkbox",value:1,checked:a,disabled:r.isReadonly,onChange:function(){return function(e,t,n){void 0===n&&(n=!1);var a=e.row.original||{};if("single"==r.selectable)O({type:"SET_PARAMETER",payload:{key:J,value:a}}),O({type:"SET_INPUT",payload:{key:J,value:a[Q]}});else{var s=[];n?s=l(I(J,t),function(e){return e&&a&&parseInt(e)!=parseInt(a[Q])})||[]:(s=I(J,t)||[],p(s)||(s=[]),s.push(a[Q])),s=v(s),O({type:"SET_INPUT",payload:{key:J,value:s}})}}(t,n,a)}})}},$=a(),ee=De($),te=o(r.selectable)?[].concat(r.columns):[Z].concat(r.columns);if(r.action){var ne={Header:"Aksi",id:"aksi_"+r.name,sortable:!1,Cell:function(t){var n=T(function(e){return e.core.parameter}),a=t.row.original[Q];return e.createElement(q,{key:"dropdown_"+r.name+"_"+a,size:"sm",id:"dropdown_"+r.name+"_"+a,isOpen:s(n.dropdown,a),toggle:function(){return function(e){var t=s(n.dropdown,e)?null:e;O({type:"SET_PARAMETER",payload:{key:"dropdown",value:t}})}(a)},drop:"end",variant:"primary",title:""},l(r.action,function(e){return i(e.show)||e.show}).map(function(n,s){var o=!!g(n.disabled)&&n.disabled;return e.createElement(X.Item,{key:"dropdownitem_"+r.name+"_"+a+"_"+s,onClick:function(){return n.onClick(t.row.original)},disabled:o},n.label)}))}};te=o(r.selectable)?[ne].concat(r.columns):[ne,Z].concat(r.columns)}function se(){m&&(r.onReload(),I(P("loaded_"+r.name,"_"),j)||O({type:"SET_FILTER",payload:{key:P("loaded_"+r.name,"_"),value:!0}}))}n(function(){ee!=m&&h(ee)}),n(function(){O({type:"SET_FILTER",payload:{key:P("loaded_"+r.name,"_"),value:!1}})},[]),V(function(){m&&se()},500,[m]),V(se,500,[I(P("keyword_"+r.name,"_"),j),I(P("page_"+r.name,"_"),j),I(P("load_"+r.name,"_"),j),I(P("loaded_"+r.name,"_"),j)]),V(function(){Y(function(e){return f([].concat(e,E),Q)}),I(J,z)&&function(){var e=null,t=null;if("single"==r.selectable)e=e=d(D,function(e){return e&&parseInt(e[Q])==t})||{},t=I(J,z)||null;else{e=[],t=I(J,z)||[];for(var n=function(n){var a=d(D,function(e){return e&&parseInt(e[Q])==t[n]})||{};o(a)||e.push(a)},a=0;a<t.length;a++)n(a)}O({type:"SET_PARAMETER",payload:{key:J,value:e}})}()},500,[I(J,z),j]),V(function(){try{b(r.data.data||[])}catch(e){}Y(function(e){return f([].concat(e,E),Q)});try{C(r.data.meta||{})}catch(e){}},500,[r.data]);var oe=e.useMemo(function(){return te},[]);return e.createElement(tt,{isLoading:r.isLoading},e.createElement("div",{style:{padding:"8px 12px"},ref:$},e.createElement("div",{style:{marginBottom:"12px"}},e.createElement(G,null,e.createElement(W,{xs:"12",sm:"12",md:"8",lg:"8"},e.createElement("div",null,r.renderFilter?r.renderFilter:null))),e.createElement(G,{style:{justifyContent:"flex-end"}},e.createElement(W,{xs:"12",sm:"12",md:"4",lg:"4"},e.createElement("div",null,r.isSearchable&&e.createElement("div",null,e.createElement(B,null,e.createElement(B.Text,{style:{background:"none"}},e.createElement(ae,{icon:re})),e.createElement(F.Control,((u={id:P("keyword_"+r.name,"_"),key:P("keyword_"+r.name,"_"),style:{borderLeft:"none"},className:"form-control",value:I(P("keyword_"+r.name,"_"),j),onChange:function(e){var t;O({type:"SET_MULTI_FILTER",payload:(t={},t[P("keyword_"+r.name,"_")]=e.target.value,t[P("page_"+r.name,"_")]=1,t.loaded=!1,t)})},type:"text"}).id=P("keyword_"+J),u.name="keyword",u.placeholder="Pencarian",u)),e.createElement(U,{style:{zIndex:0},variant:"primary",onClick:se,type:"button",disabled:r.isLoading},e.createElement(ae,{icon:de,spin:r.isLoading})),(r.export||r.import)&&e.createElement(e.Fragment,null,r.export&&e.createElement(U,{id:"exportFile",style:{zIndex:0},variant:"primary",className:"mr-1",onClick:r.exportReload,type:"button",disabled:r.disabledButton},e.createElement(ae,{icon:ge}),e.createElement(K,{placement:"top",isOpen:x,autohide:!1,target:"exportFile",toggle:function(){return H(!x)}},"Export")),r.import&&e.createElement(U,{id:"importFile",style:{zIndex:0},variant:"primary",className:"mr-1",onClick:r.importReload,type:"button",disabled:r.disabledButton},e.createElement(ae,{icon:ve}),e.createElement(K,{placement:"top",isOpen:L,autohide:!1,target:"importFile",toggle:function(){return A(!L)}},"Import"))))))))),e.createElement(rt,{name:P(r.name,"_"),columns:oe,data:E,primaryKey:Q,isColumnsSearchable:r.isColumnsSearchable,fetchData:se,loading:r.isLoading,customPageTotal:S&&!o(S)?S.total:0,customPageCount:S&&!o(S)?S.last_page:1,customPageSize:S&&!o(S)?S.per_page:I(P("load_"+r.name,"_"),j)?I(P("load_"+r.name,"_"),j):10,customPageIndex:S&&!o(S)?S.current_page:I(P("page_"+r.name,"_"),j)?I(P("page_"+r.name,"_"),j):1})))}function ot(t){var n=[];if(p(t.errorMessage))for(var a=0;a<t.errorMessage.length;a++){var r=t.errorMessage[a];if(p(r))for(var s=0;s<r.length;s++)n.push(r[s]);else n.push(r)}else n.push(t.errorMessage);return e.createElement(F.Group,{as:G},e.createElement(F.Label,{column:!0,md:t.labelSize?t.labelSize:3},t.label?t.label:"Label",t.isRequired&&e.createElement("span",{className:"text-danger"}," *"),t.hint&&e.createElement("small",{className:"form-text text-muted"},t.hint)),e.createElement(W,{md:t.inputSize?t.inputSize:9},t.children,e.createElement(F.Text,{className:"text-danger"},n.length>0&&n.join(", "))))}var it="YYYY-MM-DD HH:mm:ss",lt=function(t){return e.createElement(B,{size:"sm"},e.createElement(B.Text,{style:{background:"none"}},e.createElement(ae,{size:"sm",icon:fe})),e.createElement(F.Control,{style:{borderLeft:"none",borderRight:"none",fontFamily:"inherit",fontSize:"inherit"},type:"text",className:"form-control",disabled:t.disabled,name:t.name,value:t.value||"",onClick:t.onClick}),e.createElement(B.Text,{style:{background:"none"}},e.createElement(ae,{size:"sm",icon:_e})))},pt=function(t){function n(e){var n;return(n=t.call(this,e)||this).handleInputChange=function(e){e=ne(e,it).isValid()?ne(e,it).format(it):null,n.props.setInput(n.props.name,e),n.onRefresh()},n.handleInputChangeStart=function(e){e=ne(e,it).isValid()?ne(e,it).format(it):null,n.props.setInput("start_"+n.props.name,e),n.onRefresh()},n.handleInputChangeEnd=function(e){e=ne(e,it).isValid()?ne(e,it).format(it):null,n.props.setInput("end_"+n.props.name,e),n.onRefresh()},n.checkTglMerah=function(e){var t=ne(e).format("d");return 5==t||6==t?"tglmerah":void 0},n.state={selected:null,start_selected:null,end_selected:null},n.onRefresh=_.debounce(n.onRefresh.bind(Le(n)),200),n}Ne(n,t);var a=n.prototype;return a.onRefresh=function(){if(this.props.isRange){var e=null,t=null;try{e=ne(this.props.start_selected,it).isValid()?ne(this.props.start_selected,it).toDate():ne(I("start_"+this.props.name,this.props.input),it).isValid()?ne(I("start_"+this.props.name,this.props.input),it).toDate():null}catch(e){}try{t=ne(this.props.end_selected,it).isValid()?ne(this.props.end_selected,it).toDate():ne(I("end_"+this.props.name,this.props.input),it).isValid()?ne(I("end_"+this.props.name,this.props.input),it).toDate():null}catch(e){}this.setState({start_selected:e,end_selected:t})}else{var n=null;try{n=ne(this.props.selected,it).isValid()?ne(this.props.selected,it).toDate():ne(I(this.props.name,this.props.input),it).isValid()?ne(I(this.props.name,this.props.input),it).toDate():null}catch(e){}this.setState({selected:n})}},a.componentDidMount=function(){this.onRefresh()},a.componentDidUpdate=function(e,t){this.props.isRange||I(this.props.name,e.input)==I(this.props.name,this.props.input)||I(this.props.name,this.props.input)==this.state.selected||this.onRefresh(),this.props.isRange&&I("start_"+this.props.name,e.input)!=I("start_"+this.props.name,this.props.input)&&I("start_"+this.props.name,this.props.input)!=this.state.start_selected&&this.onRefresh(),this.props.isRange&&I("end_"+this.props.name,e.input)!=I("end_"+this.props.name,this.props.input)&&I("end_"+this.props.name,this.props.input)!=this.state.end_selected&&this.onRefresh()},a.render=function(){return this.props.isRange?this.props.disabled||this.props.isReadonly?e.createElement("div",{className:"input-daterange input-group"},ne(this.state.start_selected,it).isValid()?ne(this.state.start_selected,it).format("DD-MM-YYYY HH:mm:ss"):null,e.createElement("span",{style:{background:"none"}},"  s/d  "),ne(this.state.end_selected,it).isValid()?ne(this.state.end_selected,it).format("DD-MM-YYYY HH:mm:ss"):null):e.createElement("div",{className:"input-daterange input-group",style:{background:"none"}},e.createElement(he,{minDate:ne(this.props.minDate,it).isValid()?ne(this.props.minDate,it).toDate():null,maxDate:ne(this.props.maxDate,it).isValid()?ne(this.props.maxDate,it).toDate():null,dateFormat:this.props.dateFormat?this.props.dateFormat:"yyyy-MM-dd HH:mm:ss",placeholder:this.props.placeholder?this.props.placeholder:"Tanggal & Waktu",selected:this.state.start_selected,isClearable:!0,customInput:e.createElement(lt,{value:this.state.start_selected,name:"start_"+this.props.name}),onChange:this.handleInputChangeStart,timeInputLabel:"Waktu : ",showTimeInput:!0,selectsStart:!0,peekNextMonth:!0,withPortal:!0,showMonthDropdown:!0,showYearDropdown:!0,name:"start_"+this.props.name,todayButton:"Hari ini",dayClassName:this.checkTglMerah,dropdownMode:"select",startDate:this.state.start_selected,endDate:this.state.end_selected,shouldCloseOnSelect:!1}),e.createElement("span",{className:"input-group-addon",style:{background:"none"}},"  -  "),e.createElement(he,{minDate:ne(this.state.start_selected,it).isValid()?ne(this.state.start_selected,it).toDate():ne(this.props.minDate,it).isValid()?ne(this.props.minDate,it).toDate():null,maxDate:ne(this.props.maxDate,it).isValid()?ne(this.props.maxDate,it).toDate():null,dateFormat:this.props.dateFormat?this.props.dateFormat:"yyyy-MM-dd HH:mm:ss",placeholder:this.props.placeholder?this.props.placeholder:"Tanggal & Waktu",selected:this.state.end_selected,isClearable:!0,name:"end_"+this.props.name,selectsEnd:!0,timeInputLabel:"Waktu : ",showTimeInput:!0,customInput:e.createElement(lt,{value:this.state.end_selected,name:"end_"+this.props.name}),onChange:this.handleInputChangeEnd,peekNextMonth:!0,withPortal:!0,showMonthDropdown:!0,showYearDropdown:!0,dayClassName:this.checkTglMerah,todayButton:"Hari ini",dropdownMode:"select",startDate:this.state.start_selected,endDate:this.state.end_selected,shouldCloseOnSelect:!1})):this.props.disabled||this.props.isReadonly?e.createElement("div",{className:"input-daterange input-group"},ne(this.state.selected,it).isValid()?ne(this.state.selected,it).format("DD-MM-YYYY HH:mm:ss"):null):e.createElement(he,{minDate:ne(this.props.minDate,it).isValid()?ne(this.props.minDate,it).toDate():null,maxDate:ne(this.props.maxDate,it).isValid()?ne(this.props.maxDate,it).toDate():null,dateFormat:this.props.dateFormat?this.props.dateFormat:"yyyy-MM-dd HH:mm:ss",placeholder:this.props.placeholder?this.props.placeholder:"Tanggal & Waktu",selected:this.state.selected,isClearable:!0,id:this.props.name,className:"form-control",customInput:e.createElement(lt,{value:this.state.selected,name:this.props.name}),dayClassName:this.checkTglMerah,onChange:this.handleInputChange,peekNextMonth:!0,timeInputLabel:"Waktu : ",showTimeInput:!0,withPortal:!0,showMonthDropdown:!0,showYearDropdown:!0,todayButton:"Hari ini",dropdownMode:"select",shouldCloseOnSelect:!1})},n}(e.Component),ut=Y(function(e){return{input:e.core.input||{}}},function(e){return{setInput:function(t,n){return e({type:"SET_INPUT",payload:{key:P(String(t),"_"),value:n}})}}})(pt);function ct(){return e.createElement(ae,{style:{position:"absolute",left:6,top:6},icon:_e,size:"sm"})}ne();var dt,mt=function(t){function n(e){var n;return(n=t.call(this,e)||this).handleInputChange=function(e){e=ne(e,"HH:mm:ss").isValid()?ne(e,"HH:mm:ss").format("HH:mm:ss"):null,n.props.setInput(n.props.name,e),n.onRefresh()},n.handleInputChangeStart=function(e){e=ne(e,"HH:mm:ss").isValid()?ne(e,"HH:mm:ss").format("HH:mm:ss"):null,n.props.setInput("start_"+n.props.name,e),n.onRefresh()},n.handleInputChangeEnd=function(e){e=ne(e,"HH:mm:ss").isValid()?ne(e,"HH:mm:ss").format("HH:mm:ss"):null,n.props.setInput("end_"+n.props.name,e),n.onRefresh()},n.state={selected:null,start_selected:null,end_selected:null},n.onRefresh=h(n.onRefresh.bind(Le(n)),200),n}Ne(n,t);var a=n.prototype;return a.componentDidUpdate=function(e,t){this.props.isRange||I(this.props.name,e.input)==I(this.props.name,this.props.input)||I(this.props.name,this.props.input)==this.state.selected||this.onRefresh(),this.props.isRange&&I("start_"+this.props.name,e.input)!=I("start_"+this.props.name,this.props.input)&&I("start_"+this.props.name,this.props.input)!=this.state.start_selected&&this.onRefresh(),this.props.isRange&&I("end_"+this.props.name,e.input)!=I("end_"+this.props.name,this.props.input)&&I("end_"+this.props.name,this.props.input)!=this.state.end_selected&&this.onRefresh()},a.onRefresh=function(){if(this.props.isRange){var e=ne(),t=ne();try{e=ne(this.props.start_selected,"HH:mm:ss").isValid()?ne(this.props.start_selected,"HH:mm:ss"):ne(I("start_"+this.props.name,this.props.input),"HH:mm:ss").isValid()?ne(I("start_"+this.props.name,this.props.input),"HH:mm:ss"):null}catch(e){}try{t=ne(this.props.end_selected,"HH:mm:ss").isValid()?ne(this.props.end_selected,"HH:mm:ss"):ne(I("end_"+this.props.name,this.props.input),"HH:mm:ss").isValid()?ne(I("end_"+this.props.name,this.props.input),"HH:mm:ss"):null}catch(e){}this.setState({start_selected:e,end_selected:t})}else{var n=ne();try{n=ne(this.props.selected,"HH:mm:ss").isValid()?ne(this.props.selected,"HH:mm:ss"):ne(I(this.props.name,this.props.input),"HH:mm:ss").isValid()?ne(I(this.props.name,this.props.input),"HH:mm:ss"):null}catch(e){}this.setState({selected:n})}},a.componentDidMount=function(){this.onRefresh()},a.render=function(){return this.props.isRange?this.props.disabled||this.props.isReadonly?e.createElement("div",{className:"input-daterange input-group"},ne(this.state.start_selected,"HH:mm:ss").isValid()?ne(this.state.start_selected,"HH:mm:ss").format("HH:mm:ss"):"",e.createElement("span",{style:{background:"none"}},"  s/d  "),ne(this.state.end_selected,"HH:mm:ss").isValid()?ne(this.state.end_selected,"HH:mm:ss").format("HH:mm:ss"):""):e.createElement("div",{className:"input-daterange input-group"},e.createElement(Ce,{value:this.state.start_selected,disabled:this.props.disabled||this.props.isReadonly,inputIcon:e.createElement(ct,null),format:"HH:mm:ss",onChange:this.handleInputChangeStart}),e.createElement("span",{className:"input-group-addon",style:{background:"none"}},"  -  "),e.createElement(Ce,{value:this.state.end_selected,disabled:this.props.disabled||this.props.isReadonly,inputIcon:e.createElement(ct,null),format:"HH:mm:ss",onChange:this.handleInputChangeEnd})):this.props.disabled||this.props.isReadonly?e.createElement("div",{className:"input-daterange input-group"},ne(this.state.selected,"HH:mm:ss").isValid()?ne(this.state.selected,"HH:mm:ss").format("HH:mm:ss"):""):e.createElement(Ce,{value:this.state.selected,disabled:this.props.disabled||this.props.isReadonly,inputIcon:e.createElement(ct,null),format:"HH:mm:ss",onChange:this.handleInputChange})},n}(e.Component),ht=Y(function(e){return{input:e.core.input||{}}},function(e){return{setInput:function(t,n){return e({type:"SET_INPUT",payload:{key:P(String(t),"_"),value:n}})}}})(mt),ft=function(t){function n(n){var a;return(a=t.call(this,n)||this).state={tags:[],suggestions:[],separator:"|"},a.reactTags=e.createRef(),a}Ne(n,t);var a=n.prototype;return a.onDelete=function(e){var t=this.state.tags.slice(0);t.splice(e,1),this.setState({tags:t}),this.props.name&&this.props.setInput(this.props.name,_.map(t,"name").join(this.state.separator))},a.onAddition=function(e){var t=[].concat(this.state.tags,e);this.setState({tags:_.uniqBy(t,"name")}),this.props.name&&this.props.setInput(this.props.name,_.map(t,"name").join(this.state.separator))},a.onFocus=function(e){},a.onValidate=function(e){return _.findIndex(this.state.tags,["name",e.name])<0},a.componentDidMount=function(){for(var e=[],t=[],n=0;n<this.props.options.length;n++){var a=this.props.options[n];_.isEmpty(a[this.props.optionValue])||e.push({name:a[this.props.optionValue]})}var r="";try{r=this.props.value?this.props.value:this.props.input[this.props.name]?this.props.input[this.props.name]:""}catch(e){}for(var s=r?String(r).split(this.state.separator):[],o=0;o<s.length;o++){var i=s[o];_.isEmpty(i)||t.push({name:i})}this.setState({suggestions:e,tags:t})},a.render=function(){return e.createElement(Ie,{minQueryLength:1,noSuggestionsText:"Tidak ada usulan",ref:this.reactTags,tags:this.state.tags,id:this.props.name,removeButtonText:"Klik untuk menghapus",delimiters:["Enter","Tab"],placeholderText:this.props.placeholder?this.props.placeholder:"Dipisah dengan spasi / enter",allowNew:this.props.isCreateable,suggestions:this.state.suggestions,onDelete:this.onDelete.bind(this),onValidate:this.onValidate.bind(this),onFocus:this.onFocus.bind(this),onAddition:this.onAddition.bind(this)})},n}(e.Component),yt=Y(function(e){return{input:e.core.input||{}}},function(e){return{setInput:function(t,n){return e({type:"SET_INPUT",payload:{key:P(String(t),"_"),value:n}})}}})(ft),gt=function(t){function n(e){var n;return(n=t.call(this,e)||this).labelGenerate=function(e){if(!o(e)){if(p(n.props.optionLabel)){for(var t=[],a=n.props.separator?n.props.separator:" | ",r=0;r<=n.props.optionLabel.length-1;r++)t.push(e[n.props.optionLabel[r]]);return t.join(a)}return e[n.props.optionLabel]}return null},n.onChange=function(e){if(n.props.name)try{n.props.setInput(n.props.name,n.props.isMultiple?E(e,n.props.optionValue):e[n.props.optionValue])}catch(e){n.props.setInput(n.props.name,null)}n.onRefresh()},n.openModal=function(){n.setState({show:!n.state.show})},n.state={defaultValue:null,options:[],show:!1},n.onRefresh=h(n.onRefresh.bind(Le(n)),200),n}Ne(n,t);var a=n.prototype;return a.onRefresh=function(){var e=null,t=null;if(this.props.value)e=this.props.value;else if(e=I(this.props.name,this.props.input)||[],this.props.isMultiple){t=[];for(var n=0;n<this.props.options.length;n++)for(var a=0;a<e.length;a++){var r=this.props.options[n],s=e[a];String(r[this.props.optionValue])==String(s)&&t.push(r)}}else t=d(this.props.options,function(t){return String(t[this.props.optionValue])==e}.bind(this));t=i(t)||c(t)?null:t,this.setState({defaultValue:t})},a.componentDidUpdate=function(e,t){s(I(this.props.name,e.input),I(this.props.name,this.props.input))||s(this.state.defaultValue,I(this.props.name,this.props.input))||this.onRefresh()},a.componentDidMount=function(){this.onRefresh()},a.render=function(){var t=this,n=[];try{for(var a=0;a<this.props.options.length;a++){var r=this.props.options[a];this.props.isHtml&&(r[this.props.name]=A(String(r[this.props.name]))),n.push(r)}}catch(e){}return this.props.disabled||this.props.isReadonly?this.labelGenerate(this.state.defaultValue):this.props.withModal?e.createElement(e.Fragment,null,e.createElement(Row,null,!this.props.isReadonly&&e.createElement(Col,{lg:"1",md:"1",sm:"3",xs:"1"},e.createElement(Button,{type:"button",className:"btn btn-icon btn-primary btn-sm",onClick:this.openModal},e.createElement(ae,{size:"sm",icon:re})," Pilih")),e.createElement(Col,{lg:"11",md:"11",sm:"9",xs:"11"},!this.state.defaultValue||i(this.state.defaultValue)||o(this.state.defaultValue)?"":this.labelGenerate(this.state.defaultValue))),e.createElement(Modal,{size:"lg",show:this.state.show,onHide:this.openModal},e.createElement(ModalHeader,{closeButton:!0,toggle:this.openModal},e.createElement(Modal.Title,null,this.props.placeholder||"Pilih")),e.createElement(ModalBody,null,e.createElement(Pe,{isClearable:!0,id:this.props.id?this.props.id:this.props.name,isSearchable:!0,isHtml:this.props.isHtml,isMulti:this.props.isMultiple,placeholder:this.props.placeholder?this.props.placeholder:"Pilih",getOptionLabel:this.labelGenerate,getOptionValue:function(e){return e[t.props.optionValue]},noOptionsMessage:function(){return"Data tidak ditemukan"},value:this.state.defaultValue,onChange:this.onChange,options:n,isDisabled:this.props.disabled})))):e.createElement(Pe,{menuPortalTarget:document.body,menuPosition:"fixed",styles:{menuPortal:function(e){return Ve({},e,{fontFamily:"inherit",fontSize:"inherit",zIndex:9999})},menu:function(e){return Ve({},e,{fontFamily:"inherit",fontSize:"inherit",zIndex:"9999 !important"})},multiValueRemove:function(e){return Ve({},e,{color:"#db2828",cursor:"pointer"})},placeholder:function(e){return Ve({},e,{fontFamily:"inherit",fontSize:"inherit"})},multiValue:function(e){return Ve({},e,{background:"none"})},multiValueLabel:function(e){return Ve({},e,{fontFamily:"inherit",fontSize:"inherit"})},option:function(e){return Ve({},e,{fontFamily:"inherit",fontSize:"inherit"})},clearIndicator:function(e,t){return Ve({},e,{cursor:"pointer",color:"#db2828"})}},className:"tcomponent-select",isClearable:!0,id:this.props.id?this.props.id:this.props.name,isSearchable:!0,isHtml:this.props.isHtml,isMulti:this.props.isMultiple,placeholder:this.props.placeholder?this.props.placeholder:"Pilih",getOptionLabel:this.labelGenerate,getOptionValue:function(e){return e[t.props.optionValue]},noOptionsMessage:function(){return"Data tidak ditemukan"},value:this.state.defaultValue,onChange:this.onChange,options:n,isDisabled:this.props.disabled})},n}(e.Component),vt=Y(function(e){return{input:e.core.input||{}}},function(e){return{setInput:function(t,n){return e({type:"SET_INPUT",payload:{key:P(String(t),"_"),value:n}})}}})(gt);function _t(a){var r=t(!1),i=r[0],p=r[1],u=t(!1),c=u[0],d=u[1],m=t(!1),h=m[0],f=m[1],y=t(!1),g=y[0],v=y[1],_=T(function(e){return e.auth})||{},E=T(function(e){return e.core.input})||{},b=T(function(e){return e.core.validation})||[],k=(T(function(e){return e.core.parameter}),T(function(e){return e.core.filter})||{}),D=R(),Y=t({}),M=Y[0],S=Y[1],C=t({activity:{},role:"",response:[]}),I=C[0],H=C[1],V=a.doAfterSubmit,A=a.isLoading,O=a.doSubmit,z=a.doCancel,B=a.isReadonly,j=a.relation,K=a.id,q=a.isDelete,X=t(B),Q=X[0],$=X[1];return n(function(){$(B)},[B]),n(function(){var e,t;e=process.env.REACT_APP_API_URL+"/komentar_respon?",t={data:w({relation:j,id:K}),method:"POST",headers:x(_),url:e},v(!0),Z(t).then(function(e){var t=e.data.data||{};q&&(t.response=l(t.response,function(e){return"HAPUS"==e.code})),H(t),v(!1)}).catch(function(e){N(e,D),v(!1)})},[]),n(function(){var e=[];try{e=I.role.split(",")}catch(e){}var t=[];try{t=_.user.role.split(",")}catch(e){}for(var n=!1,a=!1,r=0;r<t.length;r++)!a&&t[r]&&s(String(t[r]).trim().toLowerCase(),"admin")&&(a=!0,n=!0,D({type:"SET_INPUT",payload:{key:"response_role",value:String(t[r]).trim().toLowerCase()}}));if(!a)for(var i=0;i<e.length;i++)for(var l=0;l<t.length;l++)e[i]&&t[l]&&String(e[i]).trim().toLowerCase()==String(t[l]).trim().toLowerCase()&&!n&&(n=!0,D({type:"SET_INPUT",payload:{key:"response_role",value:String(t[l]).trim().toLowerCase()}}));!o(I.activity)&&I.response.length>0&&n&&Q&&!B?($(!1),D({type:"SET_INPUT",payload:{key:"activity",value:I.activity.code}})):$(!0)},[I]),n(function(){h&&!o(b)&&f(!1)},[b]),n(function(){!h||A||i||(f(!1),o(b)&&V&&V())},[i,b,A]),g?e.createElement(Ue,null):e.createElement(tt,{isLoading:A||h},e.createElement(J,null,e.createElement(J.Body,null,e.createElement(J.Title,{tag:"h5"},I.activity.name||"Alur tidak ditemukan"),e.createElement(J.Text,null,!Q&&e.createElement(G,null,e.createElement(W,{lg:"6"},e.createElement(F.Group,{as:G},e.createElement(W,{lg:"3"},e.createElement(F.Label,null,"Respon ",e.createElement("span",{className:"text-danger"},"*"))),e.createElement(W,{lg:"9"},e.createElement(vt,{name:"response_activity",options:I.response,separator:" | ",optionLabel:["name"],optionValue:"code"}))),e.createElement(F.Group,{as:G},e.createElement(W,{lg:"3"},e.createElement(F.Label,null,"Lampiran")),e.createElement(W,{lg:"5"},e.createElement(Ge,{value:E.attachment,name:"response_attachment",id:"response_attachment"})))),e.createElement(W,{lg:"6"},e.createElement(F.Group,{as:G},e.createElement(W,{lg:"3",style:{marginBottom:35}},e.createElement(F.Label,null,"Komentar")),e.createElement(W,{lg:"9"},e.createElement(ze,{type:"textarea",required:!0,name:"response_comment",id:"response_comment",rows:"3"}))))),e.createElement(st,{data:M,isLoading:c,name:P(a.relation,"_"),primaryKey:"id",isSearchable:!0,isColumnsSearchable:!0,onReload:function(){var e=process.env.REACT_APP_API_URL+"/komentar?",t={};try{t=L(k,["user","role","activity","comment","due_datetime","start_datetime","end_datetime"],P(a.relation,"_"))}catch(e){}var n=Ve({relation:j,id:K},t),r={data:w(n),method:"POST",headers:x(_),url:e};d(!0),Z(r).then(function(e){S(e.data.data),d(!1)}).catch(function(e){N(e,D),d(!1)})},columns:[{Header:"Nama",id:"user",accessor:function(e){return e.user}},{Header:"Jabatan",id:"role",accessor:function(e){return e.role}},{Header:"Aktifitas",id:"activity",accessor:function(e){return e.activity}},{Header:"Respon",id:"response",accessor:function(e){return e.response}},{Header:"Komentar",id:"comment",accessor:function(e){return e.comment}},{Header:"Tenggat",id:"due_datetime",accessor:function(e){return e.due_datetime&&ne(e.due_datetime).format("DD-MM-YYYY HH:mm")}},{Header:"Mulai",id:"start_datetime",accessor:function(e){return e.start_datetime&&ne(e.start_datetime).format("DD-MM-YYYY HH:mm")}},{Header:"Selesai",id:"end_datetime",accessor:function(e){return e.end_datetime&&ne(e.end_datetime).format("DD-MM-YYYY HH:mm")}},{Header:"Lampiran",id:"attachment",accessor:function(t){return e.createElement(Ge,{value:t.attachment,isReadonly:!0})}}]})),e.createElement(G,{className:"mt-2"},e.createElement(W,null,e.createElement(U,{type:"button",className:"btn btn-icon btn-primary btn-sm float-left",onClick:function(e){z&&z()}},"Kembali"),!Q&&e.createElement(U,{type:"button",className:"btn btn-icon btn-primary btn-sm float-right",onClick:function(e){!E.response_activity||o(E.response_activity)?D({type:"SET_MESSAGE",payload:"Respon wajib diisi"}):(f(!0),p(!0),setTimeout(function(){return p(!1)},1e3),O&&O())}},"Proses"))))))}function Et(t){return e.createElement(Qe,Ve({},t,{yearOnly:!0}))}var bt=we(dt||(dt=Ae(["\n   position: absolute;\n   top: 50%;\n   left: 50%;\n   margin-top: -25px;\n   margin-left: -50px;\n"])));function kt(){return e.createElement(me,{color:"#000",css:bt,size:50})}var Dt=function(t){function n(e){var n;return(n=t.call(this,e)||this).handleInputChange=function(e){n.props.setInput(n.props.name,e.hex),n.props.setParameter("selected_"+n.props.name,e)},n.toggle=function(){n.setState({open:!n.state.open})},n.state={open:!1},n}Ne(n,t);var a=n.prototype;return a.componentDidMount=function(){try{this.props.setInput(this.props.name,this.props.parameter["selected_"+this.props.name].hex)}catch(e){}},a.render=function(){var t="";try{t=I(this.props.name,this.props.input)||""}catch(e){}return e.createElement(e.Fragment,null,this.state.open?e.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px",zIndex:999}},e.createElement(xe,{color:t,onChangeComplete:this.handleInputChange}),e.createElement(U,{style:{marginTop:10,backgroundColor:t,border:0},className:"btn btn-primary",onClick:this.toggle,type:"button"},"Pilih")):e.createElement(U,{style:{zIndex:0,backgroundColor:t,border:0},className:"btn btn-primary",onClick:this.toggle,type:"button"},"Pilih"))},n}(e.Component),Yt=Y(function(e){return{input:e.core.input||{},parameter:e.core.parameter||{}}},function(e){return{setInput:function(t,n){return e({type:"SET_INPUT",payload:{key:P(String(t),"_"),value:n}})},setParameter:function(t,n){return e({type:"SET_PARAMETER",payload:{key:P(String(t),"_"),value:n}})}}})(Dt);function Tt(a){var r=t({}),s=r[0],u=r[1],c=t(!1),d=c[0],m=c[1],h=a.isMultiple,f=a.optionLabel,y=a.separator,g=a.primaryKey,v=a.id,_=a.param,E=P(a.name,"_"),k=P("selected_"+E,"_"),D=R(),Y=T(function(e){return e.auth})||{},M=T(function(e){return e.core.input})||{},S=T(function(e){return e.core.filter})||{},C=T(function(e){return e.core.parameter})||{};return n(function(){var e=process.env.REACT_APP_API_URL+"/"+a.url,t=L(S,[],E),n=w(Ve({pkey:g,selected:[v],keyword:t.keyword,load:1,page:1},_)),r={method:"POST",headers:x(Y),url:e,data:n};m(!0),Z(r).then(function(e){u(e.data.data.data[0]),m(!1)}).catch(function(e){m(!1)})},[v]),e.createElement(e.Fragment,null,!s||i(s)||o(s)?d?e.createElement(Ue,null):"":[function(e){if(p(f)){var t=[];y=y||" | ";for(var n=0;n<=f.length-1;n++)e[f[n]]&&!i(e[f[n]])&&t.push(e[f[n]]);return t.join(y)}return e[f]?e[f]:""}(s),!a.isReadonly&&e.createElement(U,{variant:"link",size:"sm",onClick:function(e){if(u(null),b(a.optionValue)&&Object.keys(a.optionValue).map(function(e,t){D({type:"SET_INPUT",payload:{key:a.optionValue[e],value:null}})}),h){var t=l(I(E,M),function(t){return t!=e}),n=l(I(k,M),function(t){return t!=e}),r=l(I(k,C),function(t){return t[g]!=e});D({type:"SET_INPUT",payload:{key:E,value:t}}),D({type:"SET_INPUT",payload:{key:k,value:n}}),D({type:"SET_PARAMETER",payload:{key:k,value:r}})}else D({type:"SET_INPUT",payload:{key:E,value:null}}),D({type:"SET_INPUT",payload:{key:k,value:null}}),D({type:"SET_PARAMETER",payload:{key:k,value:{}}})}.bind(null,s[g]),style:{borderRadius:100}},e.createElement(ae,{size:"sm",color:"#db2828",icon:oe}))])}function Rt(r){var u=r.isMultiple,d=r.defaultValue,m=r.optionLabel,h=r.separator,f=R(),g=T(function(e){return e.auth})||{},_=T(function(e){return e.core.input})||{},k=T(function(e){return e.core.filter})||{},D=T(function(e){return e.core.parameter})||{},Y=t(!1),M=Y[0],S=Y[1],C=(t(!1),t(!1)),H=C[0],N=C[1],A=t(!1),z=A[0],j=A[1],K=t({}),q=K[0],X=K[1],J=(t(u?[]:{}),t(0)[1]),Q=t(!1),$=Q[0],ee=Q[1],te=(t(1),P(r.name,"_")),ne=P("selected_"+te,"_"),se=(t(r.label?r.label:I(te,_)),a()),oe=De(se),ie=t([]),le=ie[0],pe=ie[1],ue=t({}),ce=ue[0],me=ue[1],he=r.primaryKey?r.primaryKey:"id";function fe(e){var t=[];if(h=h||" | ",p(m)){for(var n=0;n<=m.length-1;n++)e[m[n]]&&!i(e[m[n]])&&t.push(e[m[n]]);return t.join(h)}return e[m]?e[m]:""}var ye=[{Header:"#",id:te+"_check",Cell:function(t){var n=T(function(e){return e.core.input}),a=!1,s=I(ne,n);try{a=u?y(s,function(e){return e===t.row.original[he]})>-1:s===t.row.original[he]}catch(e){}return t.row.original[he]?e.createElement(F.Check,{inline:!0,id:P(te+"_check_"+t.row.original[he],"_"),name:P(te+"_check_"+t.row.original[he],"_"),style:{zIndex:100},type:u?"checkbox":"radio",value:1,checked:a,disabled:r.isReadonly,onChange:function(){return function(e,t,n){void 0===n&&(n=!1);var a=e.row.original||{};if(u){var r=[],s=I(ne,t);n?r=l(s,function(e){return e&&a&&String(e)!=String(a[he])})||[]:(p(r=s||[])||(r=[]),a[he]&&r.push(a[he])),r=v(r),r=l(r,function(e){return!c(e)&&!i(e)})||[],f({type:"SET_INPUT",payload:{key:ne,value:r}})}else f({type:"SET_INPUT",payload:{key:ne,value:a[he]}})}(t,n,a)}}):null}}].concat([{Header:"Keterangan",id:"label",accessor:function(e){return fe(e)}}]);function ge(){$&&Ee()}V(function(){if(u){var e=l(I(ne,_),function(e){return!c(e)&&!i(e)})||[];if(e.length>0){var t=process.env.REACT_APP_API_URL+"/"+r.url,n=L(k,[],te),a=w(Ve({pkey:he,selected:e,keyword:n.keyword,load:e.length,page:1},r.parameter)),s={method:"POST",headers:x(g),url:t,data:a};N(!0),Z(s).then(function(e){f({type:"SET_PARAMETER",payload:{key:ne,value:e.data.data.data}}),be(e.data.data.data),N(!1)}).catch(function(e){N(!1)})}else f({type:"SET_PARAMETER",payload:{key:ne,value:null}})}else{var o=I(ne,_)||null;if(o){var p=process.env.REACT_APP_API_URL+"/"+r.url,d=L(k,[],te),m=w(Ve({pkey:he,selected:[o],keyword:d.keyword,load:1,page:1},r.parameter)),h={method:"POST",headers:x(g),url:p,data:m};N(!0),Z(h).then(function(e){var t=e.data.data.data[0]||{};f({type:"SET_PARAMETER",payload:{key:ne,value:t}}),be(t),N(!1)}).catch(function(e){N(!1)})}else f({type:"SET_PARAMETER",payload:{key:ne,value:null}})}},500,[I(ne,_)]),V(ge,500,[I("keyword_"+te,k),I("page_"+te,k),I("load_"+te,k)]);var ve=e.useMemo(function(){return ye},[]);function _e(){ee(!1)}function Ee(){var e=process.env.REACT_APP_API_URL+"/"+r.url,t=L(k,[],te),n=w(Ve({pkey:he,page:t.page,load:t.load,keyword:t.keyword,sorted:t.sorted,search:t.search},r.parameter)),a={method:"POST",headers:x(g),url:e,data:n};return j(!0),Z(a).then(function(e){var t=e.data||{};if(void 0!==t.data.data){J(t.data.meta.last_page);try{pe(t.data.data||[])}catch(e){}try{me(t.data.meta||{})}catch(e){}}else if(void 0!==t.data){J(t.meta.last_page);try{pe(t.data||[])}catch(e){}try{me(t.meta||{})}catch(e){}}j(!1)}).catch(function(e){j(!1)})}function be(e){u?function(e){if(b(r.optionValue))Object.keys(r.optionValue).map(function(t,n){var a=r.optionValue[t],o=null;if(e)try{o=v(E(e,t))}catch(e){}s(I(a,_),o)||f({type:"SET_INPUT",payload:{key:a,value:o}})});else{var t=te,n=null;e&&(n=v(E(e,he))),s(I(t,_),n)||f({type:"SET_INPUT",payload:{key:t,value:n}})}}(e):function(e){if(b(r.optionValue))Object.keys(r.optionValue).map(function(t,n){var a=r.optionValue[t],o=null;if(e)try{o=e[t]}catch(e){}s(I(a,_),o)||f({type:"SET_INPUT",payload:{key:a,value:o}})});else{var t=te,n=null;e&&(n=e[he]),s(I(t,_),n)||f({type:"SET_INPUT",payload:{key:t,value:n}})}}(e)}n(function(){s(r.parameter,q)||(X(r.parameter),ge()),oe!=M&&S(oe)}),n(function(){if(M){var e=null;try{u?(e=E(d,"value"),e=l(e,function(e){return e})||[]):e=d.value||null}catch(e){}var t=I(ne,_)||null;s(e,t)||(c(e)&&!c(t)?f({type:"SET_INPUT",payload:{key:ne,value:t}}):!c(e)&&c(t)?f({type:"SET_INPUT",payload:{key:ne,value:e}}):c(e)||c(t)?f({type:"SET_INPUT",payload:{key:ne,value:null}}):f({type:"SET_INPUT",payload:{key:ne,value:e}}))}},[M]),n(function(){var e=null;try{e=u?l(E(d,"value"),function(e){return e})||null:d.value||null}catch(e){}e&&f({type:"SET_INPUT",payload:{key:ne,value:e}})},[]);var ke=[],Ye=I(ne,_);try{ke=u?p(Ye)?Ye:[]:Ye?[Ye]:[]}catch(e){}var Te=I(ne,D),Re=null;try{Re=u?p(Te)?Te:[]:b(Te)?Te:{}}catch(e){}return e.createElement("div",{ref:se},e.createElement(G,null,!r.isReadonly&&e.createElement(W,{lg:"2",md:"2",sm:"4",xs:"12"},e.createElement(U,{size:"sm",variant:"primary",type:"button",className:"btn-icon",onClick:function(){f({type:"SET_FILTER",payload:{key:P("page_"+te,"_"),value:1}}),ee(function(e){return!e}),Ee()}},e.createElement(ae,{icon:re}))),e.createElement(W,{lg:"10",md:"10",sm:"8",xs:"12"},H?e.createElement(Ue,null):ke.map(function(t,n){return e.createElement(e.Fragment,null,e.createElement(Tt,{isReadonly:r.isReadonly,name:te,optionLabel:m,separator:h,param:r.parameter,url:r.url,primaryKey:he,isMultiple:u,id:t}),r.isReadonly?ke.length-1==n?null:", ":null)}))),e.createElement(O,{size:"lg",show:$,onHide:_e},e.createElement(O.Header,{onHide:_e,closeButton:!0},e.createElement(O.Title,null,r.placeholder||"Pilih")),e.createElement(O.Body,null,e.createElement(tt,{isLoading:z},e.createElement("div",null,e.createElement(B,{style:{marginBottom:12}},e.createElement(B.Text,{style:{background:"none"}},e.createElement(ae,{icon:re})),e.createElement(F.Control,{style:{borderLeft:"none"},className:"form-control",value:I("keyword_"+te,k),onChange:function(e){var t;f({type:"SET_MULTI_FILTER",payload:(t={},t["keyword_"+te]=e.target.value,t["page_"+te]=1,t)})},type:"text",id:"search_"+ne,name:"search",placeholder:"Pencarian"}),e.createElement(U,{style:{zIndex:0},variant:"primary",onClick:ge,type:"button",disabled:r.isLoading},e.createElement(ae,{icon:de,spin:r.isLoading}))),e.createElement(rt,{name:te,columns:ve,data:le,primaryKey:he,isColumnsSearchable:!0,fetchData:ge,loading:z,customPageTotal:ce&&!o(ce)?ce.total:0,customPageCount:ce&&!o(ce)?ce.last_page:1,customPageSize:ce&&!o(ce)?ce.per_page:k["load_"+te]?k["load_"+te]:5,customPageIndex:ce&&!o(ce)?ce.current_page:k["page_"+te]?k["page_"+te]:1}))),!z&&e.createElement("div",{style:{marginTop:12}},e.createElement("p",null,"Dipilih : "),H&&e.createElement(Ue,null),e.createElement("ul",null,u?Re&&Re.map(function(t,n){return e.createElement("li",null,i(t)||o(t)?"":fe(t))}):Re&&e.createElement("li",null,i(Re)||o(Re)?"":fe(Re)))))))}function Mt(t){var n={chart:{width:"auto"}},a=t.series||[];if((i(t.series)||c(t.series)||!p(t.series))&&p(t.options)&&!i(t.optionValue)&&!c(t.optionValue))for(var r=0;r<t.options.length;r++)if(u(t.optionValue))a.push(t.options[r][t.optionValue]);else if(k(t.optionValue))!function(){var e={};Object.keys(t.optionValue).map(function(n,a){e[t.optionValue[n]]=t.options[r][n]}),a.push(e)}();else if(p(t.optionValue)){for(var s=[],o=0;o<t.optionValue.length;o++)s.push(t.options[r][t.optionValue[o]]);a.push(s)}i(t.dataLabels)||c(t.dataLabels)||!k(t.dataLabels)||(n.dataLabels=t.dataLabels);var l,d=" ";if(i(t.separator)||c(t.separator)||!k(t.separator)||(d=t.separator),i(t.labels)||c(t.labels)||!p(t.labels)){if(p(t.options)&&!i(t.optionLabel)&&!c(t.optionLabel))for(n.labels=[],r=0;r<t.options.length;r++)if(u(t.optionLabel))n.labels.push(t.options[r][t.optionLabel]);else if(p(t.optionLabel)){var m=[];for(o=0;o<t.optionLabel.length;o++)m.push(t.options[r][t.optionLabel[o]]);n.labels.push(m.join(d))}}else n.labels=t.labels;if(i(t.colors)||c(t.colors)||!p(t.colors)){if(p(t.options)&&!i(t.optionColor)&&!c(t.optionColor)&&u(t.optionColor))for(n.colors=[],r=0;r<t.options.length;r++)n.colors.push(t.options[r][t.optionColor])}else n.colors=t.colors;return i(t.locales)||c(t.locales)||!p(t.locales)||(n.chart.locales=t.locales),i(t.type)||c(t.type)||!u(t.type)||(n.chart.type=t.type),i(t.animations)||c(t.animations)||!k(t.animations)||(n.chart.animations=t.animations),i(t.background)||c(t.background)||!u(t.background)||(n.chart.background=t.background),i(t.brush)||c(t.brush)||!k(t.brush)||(n.chart.brush=t.brush),i(t.defaultLocale)||c(t.defaultLocale)||!u(t.defaultLocale)||(n.chart.defaultLocale=t.defaultLocale),i(t.dropShadow)||c(t.dropShadow)||!k(t.defaultLocale)||(n.chart.dropShadow=t.dropShadow),i(t.fontFamily)||c(t.fontFamily)||!u(t.fontFamily)||(n.chart.fontFamily=t.fontFamily),i(t.foreColor)||c(t.foreColor)||!u(t.foreColor)||(n.chart.foreColor=t.foreColor),i(t.group)||c(t.group)||!u(t.group)||(n.chart.group=t.group),i(t.events)||c(t.events)||!k(t.events)||(n.chart.events=t.events),i(t.height)||c(t.height)||!u(t.height)&&!D(t.height)||(n.chart.height=t.height),i(t.id)||c(t.id)||!u(t.id)||(n.chart.id=P(t.id)),i(t.name)||c(t.name)||!u(t.name)||(n.chart.id=P(t.name)),i(t.offsetX)||c(t.offsetX)||!D(t.offsetX)||(n.chart.offsetX=t.offsetX),i(t.offsetY)||c(t.offsetY)||!D(t.offsetY)||(n.chart.offsetY=t.offsetY),i(t.parentHeightOffset)||c(t.parentHeightOffset)||!D(t.parentHeightOffset)||(n.chart.parentHeightOffset=t.parentHeightOffset),i(t.redrawOnParentResize)||c(t.redrawOnParentResize)||!g(t.redrawOnParentResize)||(n.chart.redrawOnParentResize=t.redrawOnParentResize),i(t.redrawOnWindowResize)||c(t.redrawOnWindowResize)||!g(t.redrawOnWindowResize)||(n.chart.redrawOnWindowResize=t.redrawOnWindowResize),i(t.selection)||c(t.selection)||!k(t.selection)||(n.chart.selection=t.selection),i(t.sparkline)||c(t.sparkline)||!g(t.sparkline)||(n.chart.sparkline=t.sparkline),i(t.stacked)||c(t.stacked)||!g(t.stacked)||(n.chart.stacked=t.stacked),i(t.stackType)||c(t.stackType)||!u(t.stackType)||(n.chart.stackType=t.stackType),i(t.toolbar)||c(t.toolbar)||!k(t.toolbar)||(n.chart.toolbar=t.toolbar),i(t.width)||c(t.width)||!u(t.width)&&!D(t.width)||(n.chart.width=t.width),i(t.zoom)||c(t.zoom)||!k(t.zoom)||(n.chart.zoom=t.zoom),i(t.fill)||c(t.fill)||!k(t.fill)||(n.fill=t.fill),i(t.forecastDataPoints)||c(t.forecastDataPoints)||!k(t.forecastDataPoints)||(n.forecastDataPoints=t.forecastDataPoints),i(t.grid)||c(t.grid)||!k(t.grid)||(n.grid=t.grid),i(t.legend)||c(t.legend)||!k(t.legend)||(n.legend=t.legend),i(t.markers)||c(t.markers)||!k(t.markers)||(n.markers=t.markers),i(t.noData)||c(t.noData)||!k(t.noData)||(n.noData=t.noData),i(t.states)||c(t.states)||!k(t.states)||(n.states=t.states),i(t.stroke)||c(t.stroke)||!k(t.stroke)||(n.stroke=t.stroke),i(t.subtitle)||c(t.subtitle)||!k(t.subtitle)||(n.subtitle=t.subtitle),i(t.theme)||c(t.theme)||!k(t.theme)||(n.theme=t.theme),i(t.title)||c(t.title)||!k(t.title)||(n.title=t.title),i(t.tooltip)||c(t.tooltip)||!k(t.tooltip)||(n.tooltip=t.tooltip),i(t.xaxis)||c(t.xaxis)||!k(t.xaxis)||(n.xaxis=t.xaxis),i(t.yaxis)||c(t.yaxis)||!k(t.yaxis)||(n.yaxis=t.yaxis),i(t.plotOptions)||c(t.plotOptions)||!k(t.plotOptions)||(n.plotOptions=((l={})[n.chart.type]=t.plotOptions,l)),e.createElement(He,{options:n,series:a,type:n.chart.type})}function St(t){return e.createElement(Mt,Ve({},t,{type:"line"}))}function Ct(t){return e.createElement(Mt,Ve({},t,{type:"bar"}))}function It(t){return e.createElement(Mt,Ve({},t,{type:"area"}))}function Pt(t){return e.createElement(Mt,Ve({},t,{type:"candlestick"}))}function wt(t){return e.createElement(Mt,Ve({},t,{type:"heatmap"}))}function xt(t){return e.createElement(Mt,Ve({},t,{type:"treemap"}))}function Ht(t){return e.createElement(Mt,Ve({},t,{type:"pie"}))}function Vt(t){return e.createElement(Mt,Ve({},t,{type:"donut"}))}function Nt(t){return e.createElement(Mt,Ve({},t,{type:"radar"}))}function Lt(t){return e.createElement(Mt,Ve({},t,{type:"rangeBar"}))}function At(t){return e.createElement(Mt,Ve({},t,{type:"bubble"}))}function Ot(t){return e.createElement(Mt,Ve({},t,{type:"polarArea"}))}function Ft(t){return e.createElement(Mt,Ve({},t,{type:"radialBar"}))}function zt(t){return e.createElement(Mt,Ve({},t,{type:"scatter"}))}function Ut(t){return e.createElement(Mt,Ve({},t,{type:"boxPlot"}))}function Bt(t){return e.createElement(Mt,Ve({},t,{type:"histogram"}))}export{It as ChartArea,Ct as ChartBar,Ut as ChartBoxPlot,At as ChartBubble,Pt as ChartCandleStick,Vt as ChartDonut,wt as ChartHeatMap,Bt as ChartHistogram,St as ChartLine,Ht as ChartPie,Ot as ChartPolarArea,Nt as ChartRadar,Ft as ChartRadial,Lt as ChartRange,zt as ChartScatter,xt as ChartTreeMap,st as DataTable,rt as DataTableContainer,ot as Field,qe as InputChoose,Yt as InputColor,Qe as InputDate,ut as InputDateTime,Ge as InputFile,$e as InputNumber,vt as InputSelect,Rt as InputSelectFetch,yt as InputTag,ze as InputText,ht as InputTime,_t as InputWorkflow,Et as InputYear,Ue as Loading,tt as LoadingOverlay,kt as LoadingPage};
//# sourceMappingURL=index.modern.js.map
